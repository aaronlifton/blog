import { e as createComponent, r as renderTemplate, m as maybeRenderHead, u as unescapeHTML } from './astro_XjYta8gE.mjs';
import 'kleur/colors';
import 'clsx';
import 'cssesc';

const html = "<p>Have you ever wanted to give yourself root permissions for certain folders in\n[OSX], while not disrupting the default group settings of system folders? One\nway to do this is to add yourself and the <code>root</code> user to a <code>sharedroot</code> group,\nand then <code>chown -R</code> a folder to be owned by the new group, instead of just by\n<code>root</code>.</p>\n<p>I found this to be necessary to install certain LaTeX packages via <code>tlmgr</code>, and\nto support installation of <a href=\"https://github.com/alexmyczko/fnt\">fnt</a>, so I’m sure\nsomeone reading this may find this useful! If you’ve had to elevate yourself via\n<code>su</code>, rather than <code>sudo</code>, when installing something I haven’t yet mentioned,\ndrop a comment!</p>\n<h2 id=\"show-me-the-code\">Show me the code</h2>\n<pre class=\"shiki shaku material-theme-darker\" style=\"color:#EEFFFF;background-color:#212121\"><div class=\"code-container\"><code><div class=\"line\"><span style=\"color: #FFCB6B\">sudo</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">dscl</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">.</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">create</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">/Groups/sharedroot</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">PrimaryGroupID</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">101</span></div><div class=\"line\"><span style=\"color: #FFCB6B\">sudo</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">dscl</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">.</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">append</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">/Groups/sharedroot</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">GroupMembership</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">aaron</span></div><div class=\"shaku-callout\" style=\"left:35ch\"><span class=\"shaku-callout-arrow\" style=\"left:18ch\"></span><p>your user name goes here</p></div><div class=\"line\"><span style=\"color: #FFCB6B\">sudo</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">dscl</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">.</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">append</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">/Groups/sharedroot</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">GroupMembership</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">root</span></div><div class=\"line\"><span style=\"color: #FFCB6B\">dscacheutil</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">-q</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">group</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">|</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #FFCB6B\">grep</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">-C</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">5</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">root</span></div><div class=\"line\"><span style=\"color: #FFCB6B\">chown</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">:shared_root</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">/usr/local/texlive/texmf-local/tex/latex/local</span></div></code></div></pre>\n<p>Then, you can turn this into a [fish] shell function, since these commands are\nhard to remember and unique to modern [OSX]:</p>\n<pre class=\"shiki shaku material-theme-darker\" style=\"color:#EEFFFF;background-color:#212121\"><div class=\"code-container\"><code><div class=\"line\"><span style=\"color: #89DDFF\">function</span><span style=\"color: #EEFFFF\"> createSharedRootGroup --description </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">adds user provided via argument to a shared group with root</span><span style=\"color: #89DDFF\">\"</span></div><div class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #82AAFF\">set</span><span style=\"color: #EEFFFF\"> -lx username </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #EEFFFF\">argv[1]</span></div><div class=\"shaku-callout\" style=\"left:11ch\"><span class=\"shaku-callout-arrow\" style=\"left:13ch\"></span><p>input your username as the argument</p></div><div class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #82AAFF\">set</span><span style=\"color: #EEFFFF\"> -lx sharedRootGroup $(</span><span style=\"color: #82AAFF\">dscl</span><span style=\"color: #EEFFFF\"> . list /Groups | </span><span style=\"color: #82AAFF\">grep</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">sharedroot</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #EEFFFF\"> | </span><span style=\"color: #82AAFF\">awk</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">'</span><span style=\"color: #C3E88D\">{print $1}</span><span style=\"color: #89DDFF\">'</span><span style=\"color: #EEFFFF\">)</span></div><div class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #89DDFF\">if</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #82AAFF\">[</span><span style=\"color: #89DDFF\">$</span><span style=\"color: #EEFFFF\">sharedRootGroup = </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">sharedroot</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #EEFFFF\">]</span></div><div class=\"line\"><span style=\"color: #EEFFFF\">        </span><span style=\"color: #89DDFF\">return</span></div><div class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #89DDFF\">else</span></div><div class=\"line\"><span style=\"color: #EEFFFF\">        </span><span style=\"color: #82AAFF\">sudo</span><span style=\"color: #EEFFFF\"> dscl . create /Groups/sharedroot PrimaryGroupID 101</span></div><div class=\"line\"><span style=\"color: #EEFFFF\">        </span><span style=\"color: #82AAFF\">sudo</span><span style=\"color: #EEFFFF\"> dscl . append /Groups/sharedroot GroupMembership </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #EEFFFF\">username</span></div><div class=\"line\"><span style=\"color: #EEFFFF\">        </span><span style=\"color: #82AAFF\">sudo</span><span style=\"color: #EEFFFF\"> dscl . append /Groups/sharedroot GroupMembership root</span></div><div class=\"line\"><span style=\"color: #EEFFFF\">        </span><span style=\"color: #82AAFF\">chown</span><span style=\"color: #EEFFFF\"> :shared_root /usr/local/texlive/texmf-local/tex/latex/local</span></div><div class=\"line\"><span style=\"color: #EEFFFF\">        </span><span style=\"color: #82AAFF\">echo</span><span style=\"color: #EEFFFF\"> $(</span><span style=\"color: #82AAFF\">dscl</span><span style=\"color: #EEFFFF\"> . list /Groups | </span><span style=\"color: #82AAFF\">grep</span><span style=\"color: #EEFFFF\"> -C 5 </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">sharedroot</span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #EEFFFF\">)</span></div><div class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #89DDFF\">end</span></div><div class=\"line\"><span style=\"color: #89DDFF\">end</span></div></code></div></pre>\n<h2 id=\"final-output\">Final output</h2>\n<p>The final output of the command should look like this:</p>\n<pre class=\"shiki shaku material-theme-darker\" style=\"color:#EEFFFF;background-color:#212121\"><div class=\"code-container\"><code><div class=\"line\"><span style=\"color: #EEFFFF\">❯ dscacheutil -q group | </span><span style=\"color: #82AAFF\">grep</span><span style=\"color: #EEFFFF\"> -A 4 sharedroot</span></div><div class=\"line\"><span style=\"color: #82AAFF\">name</span><span style=\"color: #EEFFFF\">: sharedroot</span></div><div class=\"line\"><span style=\"color: #82AAFF\">password</span><span style=\"color: #EEFFFF\">: </span><span style=\"color: #89DDFF\">*</span></div><div class=\"line\"><span style=\"color: #82AAFF\">gid</span><span style=\"color: #EEFFFF\">: 101</span></div><div class=\"line\"><span style=\"color: #82AAFF\">users</span><span style=\"color: #EEFFFF\">: aaron root</span></div></code></div></pre>";

				const frontmatter = {"title":"Creating a sharedroot group in OSX to manage `/usr/local` and `/usr/bin`","description":"How to share ownership of a folder with root, in order to install LaTeX packages via `tlmgr` or `fnt`, among other things.","pubDate":"Jan 19 2024","cover":"./assets/screenshots/nvim-dscl.png","coverAlt":"Neovim screenshot showing fish dscl function","tags":["osx"]};
				const file = "/Users/aaron/Code/astro/fullstack-dev-blog/src/content/blog/creating-a-sharedroot-group-in-osx.md";
				const url = undefined;
				function rawContent() {
					return "\nHave you ever wanted to give yourself root permissions for certain folders in\n\\[OSX\\], while not disrupting the default group settings of system folders? One\nway to do this is to add yourself and the `root` user to a `sharedroot` group,\nand then `chown -R` a folder to be owned by the new group, instead of just by\n`root`.\n\nI found this to be necessary to install certain LaTeX packages via `tlmgr`, and\nto support installation of [fnt](https://github.com/alexmyczko/fnt), so I'm sure\nsomeone reading this may find this useful! If you've had to elevate yourself via\n`su`, rather than `sudo`, when installing something I haven't yet mentioned,\ndrop a comment!\n\n## Show me the code\n\n```sh annotate\nsudo dscl . create /Groups/sharedroot PrimaryGroupID 101\nsudo dscl . append /Groups/sharedroot GroupMembership aaron\n#                                                       ^<<<\n#                                  [your user name goes here]\nsudo dscl . append /Groups/sharedroot GroupMembership root\ndscacheutil -q group | grep -C 5 root\nchown :shared_root /usr/local/texlive/texmf-local/tex/latex/local\n```\n\nThen, you can turn this into a \\[fish\\] shell function, since these commands are\nhard to remember and unique to modern \\[OSX\\]:\n\n```fish annotate\nfunction createSharedRootGroup --description \"adds user provided via argument to a shared group with root\"\n    set -lx username $argv[1]\n#                       ^\n#          [input your username as the argument]\n    set -lx sharedRootGroup $(dscl . list /Groups | grep \"sharedroot\" | awk '{print $1}')\n    if [$sharedRootGroup = \"sharedroot\"]\n        return\n    else\n        sudo dscl . create /Groups/sharedroot PrimaryGroupID 101\n        sudo dscl . append /Groups/sharedroot GroupMembership $username\n        sudo dscl . append /Groups/sharedroot GroupMembership root\n        chown :shared_root /usr/local/texlive/texmf-local/tex/latex/local\n        echo $(dscl . list /Groups | grep -C 5 \"sharedroot\")\n    end\nend\n```\n\n## Final output\n\nThe final output of the command should look like this:\n\n```fish\n❯ dscacheutil -q group | grep -A 4 sharedroot\nname: sharedroot\npassword: *\ngid: 101\nusers: aaron root\n```\n";
				}
				function compiledContent() {
					return html;
				}
				function getHeadings() {
					return [{"depth":2,"slug":"show-me-the-code","text":"Show me the code"},{"depth":2,"slug":"final-output","text":"Final output"}];
				}

				const Content = createComponent((result, _props, slots) => {
					const { layout, ...content } = frontmatter;
					content.file = file;
					content.url = url;

					return renderTemplate`${maybeRenderHead()}${unescapeHTML(html)}`;
				});

export { Content, compiledContent, Content as default, file, frontmatter, getHeadings, rawContent, url };
