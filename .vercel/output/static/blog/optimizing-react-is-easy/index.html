<!DOCTYPE html><html lang="en" class="selection:text-on-primary h-full min-h-0 text-base selection:bg-primary/25 sm:text-lg scroll-pt-nav-height scroll-smooth sm:scroll-pt-0"> <head> <!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v4.3.3"><!-- Font preloads --><link rel="preload" href="/fonts/atkinson-regular.woff" as="font" type="font/woff" crossorigin><link rel="preload" href="/fonts/atkinson-bold.woff" as="font" type="font/woff" crossorigin><!-- Canonical URL --><link rel="canonical" href="https://example.com/blog/optimizing-react-is-easy/"><!-- Primary Meta Tags --><title>Optimizing React is Easy</title><meta name="title" content="Optimizing React is Easy"><meta name="description" content="Follow one simple rule to know where to apply memoization, the single most important performance utility in React."><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://example.com/blog/optimizing-react-is-easy/"><meta property="og:title" content="Optimizing React is Easy"><meta property="og:description" content="Follow one simple rule to know where to apply memoization, the single most important performance utility in React."><meta property="og:image" content="https://example.com/_astro/bad-component.RDAvZE0F.png"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://example.com/blog/optimizing-react-is-easy/"><meta property="twitter:title" content="Optimizing React is Easy"><meta property="twitter:description" content="Follow one simple rule to know where to apply memoization, the single most important performance utility in React."><meta property="twitter:image" content="https://example.com/_astro/bad-component.RDAvZE0F.png"><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"> <link rel="stylesheet" href="/_astro/_slug_.fPnpziMM.css" />
<link rel="stylesheet" href="/_astro/_slug_.iYS_UISD.css" />
<style>dialog.svelte-fu0dbb.svelte-fu0dbb{z-index:1;--tw-bg-opacity:1;background-color:rgba(240,243,255,var(--tw-bg-opacity));transition-property:all;transition-timing-function:cubic-bezier(.23,1,.32,1);transition-delay:.15s;transition-duration:.3s;transition-timing-function:cubic-bezier(.4,0,.2,1)}@supports (color: color(display-p3 0 0 0)){dialog.svelte-fu0dbb.svelte-fu0dbb{background-color:color(display-p3 .94177 .95165 .99851 / var(--tw-bg-opacity))}}@supports (color: oklab(0% 0 0)){dialog.svelte-fu0dbb.svelte-fu0dbb{background-color:oklch(.964844 .01775 275 / var(--tw-bg-opacity))}}dialog.svelte-fu0dbb.svelte-fu0dbb::backdrop{transition:backdrop .5s ease-in-out;background:#0000004d}dialog[open].svelte-fu0dbb.svelte-fu0dbb{--tw-bg-opacity:1;background-color:rgba(250,251,254,var(--tw-bg-opacity))}@supports (color: oklab(0% 0 0)){dialog[open].svelte-fu0dbb.svelte-fu0dbb{background-color:oklch(.988281 .0046875 275 / var(--tw-bg-opacity))}}dialog.svelte-fu0dbb img.svelte-fu0dbb{margin-bottom:1rem}
</style><script type="module" src="/_astro/hoisted.rNJk9NOy.js"></script></head> <body>  <header class="grid grid-cols-layout antialiased" data-astro-cid-3ef6ksr2> <nav class="h-nav-height sm:col-content" data-astro-cid-3ef6ksr2> <h2 data-astro-cid-3ef6ksr2> <a href="/" data-astro-cid-3ef6ksr2>Aaron&#39;s Dev Blog</a> </h2> <div class="internal-links select-none" data-astro-cid-3ef6ksr2> <a href="/" data-astro-cid-3ef6ksr2 data-astro-cid-eimmu3lg> Home </a>  <a href="/blog/1" data-astro-cid-3ef6ksr2 data-astro-cid-eimmu3lg> Blog </a>  <a href="/tags" data-astro-cid-3ef6ksr2 data-astro-cid-eimmu3lg> Tags </a>  <a href="/about" data-astro-cid-3ef6ksr2 data-astro-cid-eimmu3lg> About </a>  </div> <div class="social-links select-none" data-astro-cid-3ef6ksr2> <a href="https://linkedin.com/in/aaronlifton" target="_blank" data-astro-cid-3ef6ksr2> <span class="sr-only" data-astro-cid-3ef6ksr2>Are you a recruiter? Connect with Aaron on LinkedIn</span> <svg width="32" height="32" viewBox="0 0 24 24" data-astro-cid-3ef6ksr2 data-icon="linkedin">  <symbol id="ai:local:linkedin"><path fill="currentColor" d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 0 1-2.063-2.065 2.064 2.064 0 1 1 2.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></symbol> <use  xlink:href="#ai:local:linkedin"></use> </svg> </a> <a href="https://github.com/aaronlifton" target="_blank" data-astro-cid-3ef6ksr2> <span class="sr-only" data-astro-cid-3ef6ksr2>Go to Aaron's GitHub repo</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" data-astro-cid-3ef6ksr2><path fill="currentColor" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z" data-astro-cid-3ef6ksr2></path></svg> </a> </div> </nav> </header>   <main> <div class="px-0 sm:col-content">    <article class="prose">  <div data-blog-post-container data-toc="[object Object]" class="group flex flex-col lg:flex-row-reverse lg:gap-8" data-astro-cid-bvzihdzo>  <!-- /** min-w-0 [&>pre]:my-8 [&>pre]:max-sm:full-bleed [&>[data-codeblock]]:my-8 --> <!-- [&>[data-codeblock]]:max-sm:full-bleed [&>[data-codeblock]_pre]:max-sm:rounded-none --> <div data-blog-post class="min-w-0" data-astro-cid-bvzihdzo> <div class="hero-image" data-astro-cid-bvzihdzo>  <div class="tags w-full max-w-xl mx-auto flex center justify-center" data-astro-cid-pjkakwps> <span class="tag mr-1" data-astro-cid-pjkakwps> <a href="/tags/react" data-astro-cid-pjkakwps> <svg width="1em" height="1em" viewBox="0 0 24 24" class="stroke-primary fill-theme-primary" data-astro-cid-pjkakwps data-icon="react">  <symbol id="ai:local:react"><path fill="currentColor" d="M14.23 12.004a2.236 2.236 0 0 1-2.235 2.236 2.236 2.236 0 0 1-2.236-2.236 2.236 2.236 0 0 1 2.235-2.236 2.236 2.236 0 0 1 2.236 2.236zm2.648-10.69c-1.346 0-3.107.96-4.888 2.622-1.78-1.653-3.542-2.602-4.887-2.602-.41 0-.783.093-1.106.278-1.375.793-1.683 3.264-.973 6.365C1.98 8.917 0 10.42 0 12.004c0 1.59 1.99 3.097 5.043 4.03-.704 3.113-.39 5.588.988 6.38.32.187.69.275 1.102.275 1.345 0 3.107-.96 4.888-2.624 1.78 1.654 3.542 2.603 4.887 2.603.41 0 .783-.09 1.106-.275 1.374-.792 1.683-3.263.973-6.365C22.02 15.096 24 13.59 24 12.004c0-1.59-1.99-3.097-5.043-4.032.704-3.11.39-5.587-.988-6.38a2.167 2.167 0 0 0-1.092-.278zm-.005 1.09v.006c.225 0 .406.044.558.127.666.382.955 1.835.73 3.704-.054.46-.142.945-.25 1.44a23.476 23.476 0 0 0-3.107-.534A23.892 23.892 0 0 0 12.769 4.7c1.592-1.48 3.087-2.292 4.105-2.295zm-9.77.02c1.012 0 2.514.808 4.11 2.28-.686.72-1.37 1.537-2.02 2.442a22.73 22.73 0 0 0-3.113.538 15.02 15.02 0 0 1-.254-1.42c-.23-1.868.054-3.32.714-3.707.19-.09.4-.127.563-.132zm4.882 3.05c.455.468.91.992 1.36 1.564-.44-.02-.89-.034-1.345-.034-.46 0-.915.01-1.36.034.44-.572.895-1.096 1.345-1.565zM12 8.1c.74 0 1.477.034 2.202.093.406.582.802 1.203 1.183 1.86.372.64.71 1.29 1.018 1.946-.308.655-.646 1.31-1.013 1.95-.38.66-.773 1.288-1.18 1.87a25.64 25.64 0 0 1-4.412.005 26.64 26.64 0 0 1-1.183-1.86c-.372-.64-.71-1.29-1.018-1.946a25.17 25.17 0 0 1 1.013-1.954c.38-.66.773-1.286 1.18-1.868A25.245 25.245 0 0 1 12 8.098zm-3.635.254c-.24.377-.48.763-.704 1.16-.225.39-.435.782-.635 1.174-.265-.656-.49-1.31-.676-1.947.64-.15 1.315-.283 2.015-.386zm7.26 0c.695.103 1.365.23 2.006.387-.18.632-.405 1.282-.66 1.933a25.952 25.952 0 0 0-1.345-2.32zm3.063.675c.484.15.944.317 1.375.498 1.732.74 2.852 1.708 2.852 2.476-.005.768-1.125 1.74-2.857 2.475-.42.18-.88.342-1.355.493a23.966 23.966 0 0 0-1.1-2.98c.45-1.017.81-2.01 1.085-2.964zm-13.395.004c.278.96.645 1.957 1.1 2.98a23.142 23.142 0 0 0-1.086 2.964c-.484-.15-.944-.318-1.37-.5-1.732-.737-2.852-1.706-2.852-2.474 0-.768 1.12-1.742 2.852-2.476.42-.18.88-.342 1.356-.494zm11.678 4.28c.265.657.49 1.312.676 1.948-.64.157-1.316.29-2.016.39a25.819 25.819 0 0 0 1.341-2.338zm-9.945.02c.2.392.41.783.64 1.175.23.39.465.772.705 1.143a22.005 22.005 0 0 1-2.006-.386c.18-.63.406-1.282.66-1.933zM17.92 16.32c.112.493.2.968.254 1.423.23 1.868-.054 3.32-.714 3.708-.147.09-.338.128-.563.128-1.012 0-2.514-.807-4.11-2.28.686-.72 1.37-1.536 2.02-2.44 1.107-.118 2.154-.3 3.113-.54zm-11.83.01c.96.234 2.006.415 3.107.532.66.905 1.345 1.727 2.035 2.446-1.595 1.483-3.092 2.295-4.11 2.295a1.185 1.185 0 0 1-.553-.132c-.666-.38-.955-1.834-.73-3.703.054-.46.142-.944.25-1.438zm4.56.64c.44.02.89.034 1.345.034.46 0 .915-.01 1.36-.034-.44.572-.895 1.095-1.345 1.565-.455-.47-.91-.993-1.36-1.565z"/></symbol> <use  xlink:href="#ai:local:react"></use> </svg> react </a> ,  </span><span class="tag mr-1" data-astro-cid-pjkakwps> <a href="/tags/performance" data-astro-cid-pjkakwps> <svg width="1em" height="1em" viewBox="0 0 24 24" class="stroke-primary fill-theme-primary" data-astro-cid-pjkakwps data-icon="tabler/rocket">  <symbol id="ai:local:tabler/rocket"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"><path stroke="none" d="M0 0h24v24H0z"/><path d="M4 13a8 8 0 0 1 7 7 6 6 0 0 0 3-5 9 9 0 0 0 6-8 3 3 0 0 0-3-3 9 9 0 0 0-8 6 6 6 0 0 0-5 3"/><path d="M7 14a6 6 0 0 0-3 6 6 6 0 0 0 6-3m4-8a1 1 0 1 0 2 0 1 1 0 1 0-2 0"/></g></symbol> <use  xlink:href="#ai:local:tabler/rocket"></use> </svg> performance </a> ,  </span><span class="tag mr-1" data-astro-cid-pjkakwps> <a href="/tags/optimization" data-astro-cid-pjkakwps> <svg width="1em" height="1em" viewBox="0 0 24 24" class="stroke-primary fill-theme-primary" data-astro-cid-pjkakwps data-icon="tabler/speed">  <symbol id="ai:local:tabler/speed"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"><path stroke="none" d="M0 0h24v24H0z"/><path d="M5.636 19.364a9 9 0 1 1 12.728 0M16 9l-4 4"/></g></symbol> <use  xlink:href="#ai:local:tabler/speed"></use> </svg> optimization </a>  </span> </div>  <div class="prose" data-astro-cid-bvzihdzo> <div class="title" data-astro-cid-bvzihdzo> <span class="date mb-3" data-astro-cid-bvzihdzo> <time datetime="2023-12-19T05:00:00.000Z"> Dec 19, 2023 </time>  </span> <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();;(()=>{var b=Object.defineProperty;var f=(c,o,i)=>o in c?b(c,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):c[o]=i;var l=(c,o,i)=>(f(c,typeof o!="symbol"?o+"":o,i),i);var p;{let c={0:t=>m(t),1:t=>i(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(i(t)),5:t=>new Set(i(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t)},o=t=>{let[e,r]=t;return e in c?c[e](r):void 0},i=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([e,r])=>[e,o(r)]));customElements.get("astro-island")||customElements.define("astro-island",(p=class extends HTMLElement{constructor(){super(...arguments);l(this,"Component");l(this,"hydrator");l(this,"hydrate",async()=>{var d;if(!this.hydrator||!this.isConnected)return;let e=(d=this.parentElement)==null?void 0:d.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let r=this.querySelectorAll("astro-slot"),a={},h=this.querySelectorAll("template[data-astro-template]");for(let n of h){let s=n.closest(this.tagName);s!=null&&s.isSameNode(this)&&(a[n.getAttribute("data-astro-template")||"default"]=n.innerHTML,n.remove())}for(let n of r){let s=n.closest(this.tagName);s!=null&&s.isSameNode(this)&&(a[n.getAttribute("name")||"default"]=n.innerHTML)}let u;try{u=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(n){let s=this.getAttribute("component-url")||"<unknown>",y=this.getAttribute("component-export");throw y&&(s+=` (export ${y})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),n),n}await this.hydrator(this)(this.Component,u,a,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});l(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),r.disconnect(),this.childrenConnectedCallback()},r=new MutationObserver(()=>{var a;((a=this.lastChild)==null?void 0:a.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});r.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}start(){let e=JSON.parse(this.getAttribute("opts")),r=this.getAttribute("client");if(Astro[r]===void 0){window.addEventListener(`astro:${r}`,()=>this.start(),{once:!0});return}Astro[r](async()=>{let a=this.getAttribute("renderer-url"),[h,{default:u}]=await Promise.all([import(this.getAttribute("component-url")),a?import(a):()=>()=>{}]),d=this.getAttribute("component-export")||"default";if(!d.includes("."))this.Component=h[d];else{this.Component=h;for(let n of d.split("."))this.Component=this.Component[n]}return this.hydrator=u,this.hydrate},e,this)}attributeChangedCallback(){this.hydrate()}},l(p,"observedAttributes",["props"]),p))}})();</script><astro-island uid="Z2mXc0B" component-url="/_astro/PostStats.aTcCcsp0.js" component-export="default" renderer-url="/_astro/client.bWR2MAd2.js" props="{&quot;slug&quot;:[0,&quot;optimizing-react-is-easy&quot;],&quot;data-astro-cid-bvzihdzo&quot;:[0,true]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;PostStats&quot;,&quot;value&quot;:true}" await-children=""><span class="emdash" data-svelte-h="svelte-14zf0s3">—</span> <span class="post-stats__views svelte-xfpbcr">0 views</span><!--astro:end--></astro-island> <h1 class="text-3xl" data-astro-cid-bvzihdzo>Optimizing React is Easy</h1> <hr class="not-prose" data-astro-cid-bvzihdzo> </div>  <div class="flex w-full flex-col gap-8 pb-4 transition-all md:flex-row"> <astro-island uid="Z2fzr9N" component-url="/_astro/ZoomImage.wgnhuKA6.js" component-export="default" renderer-url="/_astro/client.bWR2MAd2.js" props="{&quot;src&quot;:[0,&quot;/_astro/bad-component.RDAvZE0F.png&quot;],&quot;alt&quot;:[0,&quot;An example of a component that &#39;for sure&#39; needs memoization.&quot;],&quot;caption&quot;:[0,&quot;An example of a component that &#39;for sure&#39; needs memoization.&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;ZoomImage&quot;,&quot;value&quot;:true}" await-children=""> <button aria-label="Open full-size image"><figure class="my-8 bg-surface rounded-md py-1"><astro-slot> <img src="/_astro/bad-component.RDAvZE0F_1YaybM.webp" srcset="/_astro/bad-component.RDAvZE0F_Z2cfgBQ.webp 240w, /_astro/bad-component.RDAvZE0F_W2ONa.webp 540w, /_astro/bad-component.RDAvZE0F_Z265uB7.webp 720w, /_astro/bad-component.RDAvZE0F_1YaybM.webp 2830w" sizes="(max-width: 360px) 240px, (max-width: 720px) 540px, (max-width: 1600px) 720px, 2830px" alt="An example of a component that 'for sure' needs memoization." width="2830" height="1654" loading="lazy" decoding="async"> </astro-slot> <article class="prose text-center max-w-content mb-2 prose-gray text-base italic"><figcaption>An example of a component that 'for sure' needs memoization.</figcaption></article></figure></button> <dialog class="p-3 animate-dialog-in animate-dialog-out svelte-fu0dbb  bg-gray-50"><button class="absolute top-0 right-0 p-2 border border-radius-md bg-gray-100 border-color-gray-300 border-1 w-8 h-8 text-gray-400 hover:text-red-400 text-base font-bold leading-5" aria-label="Close" data-svelte-h="svelte-5ya9si">X</button> <figure class="bg-surface rounded-md py-1"><img src="/_astro/bad-component.RDAvZE0F.png" alt="An example of a component that 'for sure' needs memoization." class="svelte-fu0dbb"> <article class="prose text-center max-w-content mb-2 prose-gray"><figcaption>An example of a component that 'for sure' needs memoization.</figcaption></article></figure> </dialog><!--astro:end--></astro-island> </div> <p>React uses something called <strong>shallow prop comparison</strong>. It’s actually <em>quite</em> easy to understand and optimize, and
everyone should be aware of this, for it is absolutely essential to react performance.</p>
<p>So About those dependency arrays used as the 2nd argument in <code>useMemo</code>, <code>useCallback</code>, etc. — they are compared with their previous versions as follows:</p>
<pre class="shiki shaku material-theme-darker" style="color:#EEFFFF;background-color:#212121"><div class="code-container"><code><div class="line"><span style="color:#545454">// psuedo-code</span></div><div class="line"><span style="color:#C792EA">function</span><span style="color:#EEFFFF"> </span><span style="color:#82AAFF">propHasChanged</span><span style="color:#89DDFF">(</span><span style="color:#EEFFFF">prev</span><span style="color:#89DDFF">,</span><span style="color:#EEFFFF"> </span><span style="color:#EEFFFF">next</span><span style="color:#89DDFF">)</span><span style="color:#EEFFFF"> </span><span style="color:#89DDFF">{</span></div><div class="line"><span style="color:#F07178">  </span><span style="color:#89DDFF">return</span><span style="color:#F07178"> </span><span style="color:#EEFFFF">Object</span><span style="color:#89DDFF">.</span><span style="color:#82AAFF">is</span><span style="color:#F07178">(</span><span style="color:#EEFFFF">prev</span><span style="color:#89DDFF">,</span><span style="color:#F07178"> </span><span style="color:#EEFFFF">next</span><span style="color:#F07178">)</span><span style="color:#89DDFF">;</span></div><div class="shaku-callout" style="left:9ch"><span class="shaku-callout-arrow" style="left:2ch"></span><p>Object equality. Remember, {} !== {}.</p></div><div class="line"><span style="color:#89DDFF">}</span></div></code></div></pre>
<p>In other words, React compares old and new props by shallow equality; that is, it considers whether each <em>new</em> prop is <strong>referentially equal</strong> to the <em>old</em> prop.
<br/>
<br/>
This means that if props or dependencies are <em>not</em> primitive values. that is, they are <strong>arrays</strong>, <strong>objects</strong>, or <strong>functions</strong> (in Javascript, functions are objects too),
even if they have the same value, each time the component is re-rendered, they will be considered unequal to their previous versions if they are not <strong>memoized</strong>.
To avoid causing extra re-renders by having non-primitive props, <a href="https://react.dev/reference/react/memo#minimizing-props-changes">simplify props or memoize props in the parent component</a>.</p>
<p>Be careful of using objects in state, or as props, as they are not primitive values. If you need to use objects, make sure to memoize them using <code>useMemo</code> or <code>useCallback</code> as necessary.</p>
<pre class="shiki shaku material-theme-darker" style="color:#EEFFFF;background-color:#212121"><div class="code-container"><code><div class="line"><span style="color:#C792EA">function</span><span style="color:#EEFFFF"> </span><span style="color:#82AAFF">MyFC</span><span style="color:#89DDFF">({</span><span style="color:#EEFFFF"> </span><span style="color:#EEFFFF">obj</span><span style="color:#EEFFFF"> </span><span style="color:#89DDFF">}):</span><span style="color:#EEFFFF"> </span><span style="color:#FFCB6B">React</span><span style="color:#89DDFF">.</span><span style="color:#FFCB6B">FC</span><span style="color:#89DDFF">&lt;{</span><span style="color:#EEFFFF"> </span><span style="color:#F07178">obj</span><span style="color:#89DDFF">:</span><span style="color:#EEFFFF"> </span><span style="color:#89DDFF">{</span><span style="color:#EEFFFF"> </span><span style="color:#F07178">a</span><span style="color:#89DDFF">:</span><span style="color:#EEFFFF"> </span><span style="color:#FFCB6B">number</span><span style="color:#89DDFF">,</span><span style="color:#EEFFFF"> </span><span style="color:#F07178">b</span><span style="color:#89DDFF">:</span><span style="color:#EEFFFF"> </span><span style="color:#FFCB6B">number</span><span style="color:#EEFFFF"> </span><span style="color:#89DDFF">}</span><span style="color:#EEFFFF"> </span><span style="color:#89DDFF">}&gt;</span><span style="color:#EEFFFF"> </span><span style="color:#89DDFF">{</span><span style="color:#F07178"> </span></div><div class="line"><span style="color:#F07178">  </span><span style="color:#C792EA">const</span><span style="color:#F07178"> </span><span style="color:#EEFFFF">myState</span><span style="color:#F07178">  </span><span style="color:#89DDFF">=</span><span style="color:#F07178"> </span><span style="color:#82AAFF">useState</span><span style="color:#F07178">(</span><span style="color:#89DDFF">{</span><span style="color:#F07178">a</span><span style="color:#89DDFF">:</span><span style="color:#F07178"> </span><span style="color:#F78C6C">1</span><span style="color:#89DDFF">,</span><span style="color:#F07178"> b</span><span style="color:#89DDFF">:</span><span style="color:#F07178"> </span><span style="color:#F78C6C">2</span><span style="color:#89DDFF">}</span><span style="color:#F07178">)</span><span style="color:#89DDFF">;</span></div><div class="line"><span style="color:#F07178">  </span><span style="color:#89DDFF">return</span><span style="color:#F07178"> (</span></div><div class="line"><span style="color:#F07178">    &lt;</span><span style="color:#FFCB6B">div</span><span style="color:#F07178">&gt;</span></div><div class="line"><span style="color:#F07178">      </span><span style="color:#89DDFF">&lt;</span><span style="color:#EEFFFF">MyComponent</span><span style="color:#F07178"> </span><span style="color:#EEFFFF">obj</span><span style="color:#89DDFF">={</span><span style="color:#EEFFFF">myState</span><span style="color:#89DDFF">}</span><span style="color:#F07178"> </span><span style="color:#89DDFF">/&gt;</span></div><div class="shaku-callout" style="left:16ch"><span class="shaku-callout-arrow" style="left:11ch"></span><p>myState causes re-renders</p></div><div class="line"><span style="color:#F07178">      &lt;</span><span style="color:#FFCB6B">div</span><span style="color:#F07178">&gt;</span></div><div class="line"><span style="color:#F07178">        </span><span style="color:#89DDFF">&lt;</span><span style="color:#EEFFFF">Subcomponent</span><span style="color:#F07178"> </span><span style="color:#EEFFFF">val</span><span style="color:#89DDFF">={</span><span style="color:#EEFFFF">obj</span><span style="color:#89DDFF">}</span><span style="color:#F07178"> </span><span style="color:#89DDFF">/&gt;</span></div><div class="shaku-callout" style="left:9ch"><span class="shaku-callout-arrow" style="left:19ch"></span><p>so does an object from props</p></div><div class="line"><span style="color:#F07178">      </span><span style="color:#89DDFF">&lt;/</span><span style="color:#EEFFFF">div</span><span style="color:#89DDFF">&gt;</span></div><div class="line"><span style="color:#F07178">    </span><span style="color:#89DDFF">&lt;/</span><span style="color:#EEFFFF">div</span><span style="color:#89DDFF">&gt;</span></div><div class="line"><span style="color:#F07178">  )</span></div><div class="line"><span style="color:#89DDFF">}</span></div></code></div></pre>
<p>When you use <code>useMemo</code>, your component re-renders whenever any element of the dependency array is not shallowly equal to its previous value.
This means that React compares every prop in your component with its previous value using the Object.is comparison.</p>
<p>Therefore, all dependencies and props should be <strong>PRIMITIVE VALUES</strong>!
<br/>
For example, <code>Object.is(3, 3)</code> is <code>true</code>, but <code>Object.is({}, {})</code> is <code>false</code>.</p>  <a data-back-to-top data-astro-cid-bvzihdzo class="[&#38;_svg]:fill-theme-amethyst-100; align-middle text-sm text-amethyst-800 no-underline underline-offset-4 hover:text-amethyst-900 hover:no-underline [&#38;:hover_svg]:bg-amethyst-200 [&#38;:hover_svg]:stroke-amethyst-500 [&#38;:hover_svg]:text-amethyst-500 [&#38;_hover_span]:underline [&#38;_span]:underline [&#38;_svg]:bg-amethyst-100"> <span class="underline underline-offset-4">Back to top</span> <svg width="1em" height="1em" viewBox="0 0 24 24" class="inline-block" data-icon="tabler/chevron-up">  <symbol id="ai:local:tabler/chevron-up"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"><path stroke="none" d="M0 0h24v24H0z"/><path d="m6 15 6-6 6 6"/></g></symbol> <use  xlink:href="#ai:local:tabler/chevron-up"></use> </svg> </a> </div> </div> </div> </div>  </article>  </div> </main> <footer data-astro-cid-sz7xmlte> <div class="max-w-3xl" data-astro-cid-sz7xmlte>
&copy; 2024 Aaron Lifton. All rights reserved.
<div class="social-links" data-astro-cid-sz7xmlte> <a href="https://linkedin.com/aaronlifton" target="_blank" data-astro-cid-sz7xmlte> <span class="sr-only" data-astro-cid-sz7xmlte>Are you a recruiter? Connect with Aaron on LinkedIn</span> <svg width="32" height="32" viewBox="0 0 24 24" data-astro-cid-sz7xmlte data-icon="linkedin">   <use  xlink:href="#ai:local:linkedin"></use> </svg> </a> <a href="https://github.com/aaronlifton" target="_blank" data-astro-cid-sz7xmlte> <span class="sr-only" data-astro-cid-sz7xmlte>Go to Aaron's Github page</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" astro-icon="social/github" data-astro-cid-sz7xmlte><path fill="currentColor" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z" data-astro-cid-sz7xmlte></path></svg> </a> </div> </div> </footer>  </body></html>  