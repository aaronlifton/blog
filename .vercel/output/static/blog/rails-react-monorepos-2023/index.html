<!DOCTYPE html><html lang="en" class="selection:text-on-primary h-full min-h-0 text-base selection:bg-primary/25 sm:text-lg scroll-pt-nav-height scroll-smooth sm:scroll-pt-0"> <head> <!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v4.3.3"><!-- Font preloads --><link rel="preload" href="/fonts/atkinson-regular.woff" as="font" type="font/woff" crossorigin><link rel="preload" href="/fonts/atkinson-bold.woff" as="font" type="font/woff" crossorigin><!-- Canonical URL --><link rel="canonical" href="https://example.com/blog/rails-react-monorepos-2023/"><!-- Primary Meta Tags --><title>The state of rails monorepos in December 2023</title><meta name="title" content="The state of rails monorepos in December 2023"><meta name="description" content="Hotwire is a framework for Rails developers who still refuse to use a modern framework in 2024."><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://example.com/blog/rails-react-monorepos-2023/"><meta property="og:title" content="The state of rails monorepos in December 2023"><meta property="og:description" content="Hotwire is a framework for Rails developers who still refuse to use a modern framework in 2024."><meta property="og:image" content="https://example.com/_astro/hotwire._LPxur_h.png"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://example.com/blog/rails-react-monorepos-2023/"><meta property="twitter:title" content="The state of rails monorepos in December 2023"><meta property="twitter:description" content="Hotwire is a framework for Rails developers who still refuse to use a modern framework in 2024."><meta property="twitter:image" content="https://example.com/_astro/hotwire._LPxur_h.png"><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"> <link rel="stylesheet" href="/_astro/_slug_.fPnpziMM.css" />
<link rel="stylesheet" href="/_astro/_slug_.iYS_UISD.css" />
<style>dialog.svelte-fu0dbb.svelte-fu0dbb{z-index:1;--tw-bg-opacity:1;background-color:rgba(240,243,255,var(--tw-bg-opacity));transition-property:all;transition-timing-function:cubic-bezier(.23,1,.32,1);transition-delay:.15s;transition-duration:.3s;transition-timing-function:cubic-bezier(.4,0,.2,1)}@supports (color: color(display-p3 0 0 0)){dialog.svelte-fu0dbb.svelte-fu0dbb{background-color:color(display-p3 .94177 .95165 .99851 / var(--tw-bg-opacity))}}@supports (color: oklab(0% 0 0)){dialog.svelte-fu0dbb.svelte-fu0dbb{background-color:oklch(.964844 .01775 275 / var(--tw-bg-opacity))}}dialog.svelte-fu0dbb.svelte-fu0dbb::backdrop{transition:backdrop .5s ease-in-out;background:#0000004d}dialog[open].svelte-fu0dbb.svelte-fu0dbb{--tw-bg-opacity:1;background-color:rgba(250,251,254,var(--tw-bg-opacity))}@supports (color: oklab(0% 0 0)){dialog[open].svelte-fu0dbb.svelte-fu0dbb{background-color:oklch(.988281 .0046875 275 / var(--tw-bg-opacity))}}dialog.svelte-fu0dbb img.svelte-fu0dbb{margin-bottom:1rem}
</style><script type="module" src="/_astro/hoisted.rNJk9NOy.js"></script></head> <body>  <header class="grid grid-cols-layout antialiased" data-astro-cid-3ef6ksr2> <nav class="h-nav-height sm:col-content" data-astro-cid-3ef6ksr2> <h2 data-astro-cid-3ef6ksr2> <a href="/" data-astro-cid-3ef6ksr2>Aaron&#39;s Dev Blog</a> </h2> <div class="internal-links select-none" data-astro-cid-3ef6ksr2> <a href="/" data-astro-cid-3ef6ksr2 data-astro-cid-eimmu3lg> Home </a>  <a href="/blog/1" data-astro-cid-3ef6ksr2 data-astro-cid-eimmu3lg> Blog </a>  <a href="/tags" data-astro-cid-3ef6ksr2 data-astro-cid-eimmu3lg> Tags </a>  <a href="/about" data-astro-cid-3ef6ksr2 data-astro-cid-eimmu3lg> About </a>  </div> <div class="social-links select-none" data-astro-cid-3ef6ksr2> <a href="https://linkedin.com/in/aaronlifton" target="_blank" data-astro-cid-3ef6ksr2> <span class="sr-only" data-astro-cid-3ef6ksr2>Are you a recruiter? Connect with Aaron on LinkedIn</span> <svg width="32" height="32" viewBox="0 0 24 24" data-astro-cid-3ef6ksr2 data-icon="linkedin">  <symbol id="ai:local:linkedin"><path fill="currentColor" d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 0 1-2.063-2.065 2.064 2.064 0 1 1 2.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></symbol> <use  xlink:href="#ai:local:linkedin"></use> </svg> </a> <a href="https://github.com/aaronlifton" target="_blank" data-astro-cid-3ef6ksr2> <span class="sr-only" data-astro-cid-3ef6ksr2>Go to Aaron's GitHub repo</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" data-astro-cid-3ef6ksr2><path fill="currentColor" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z" data-astro-cid-3ef6ksr2></path></svg> </a> </div> </nav> </header>   <main> <div class="px-0 sm:col-content">    <article class="prose">  <div data-blog-post-container data-toc="[object Object]" class="group flex flex-col lg:flex-row-reverse lg:gap-8 lg:flex-row-reverse" data-astro-cid-bvzihdzo> <aside style="--offset-from-top:1rem" class="relative shrink-0 mb-0 lg:mb-8 lg:ml-auto lg:mb-0 lg:basis-1/3 lg:sticky lg:top-[var(--offset-from-top)] lg:h-[calc(100vh-var(--offset-from-top)_*_2)] [&#38;_h2]:m-0 max-w-prose" data-astro-cid-bvzihdzo> <button type="button" data-toggle-toc="true" data-open-toc-label="Open ToC" data-closed-toc-label="Close ToC" aria-label="Close Table of Contents" style="--duration:150ms" data-preload="true" data-astro-cid-bvzihdzo="true" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary min-w-[40px] h-[40px] justify-center items-center rounded-full z-1 absolute top-4 right-4 hidden lg:grid lg:min-w-0 lg:group-data-toc-open:grid-cols-[0fr_max-content] lg:group-data-toc-closed:grid-cols-[1fr_max-content] transition-all duration-[var(--duration)] ease-in-out overflow-hidden lg:justify-center p-6"> <svg width="1em" height="1em" viewBox="0 0 24 24" class="col-start-2 col-end-2 row-start-1 row-end-1 scale-0 transition-transform duration-[var(--duration)] ease-out group-data-toc-open:scale-100 group-data-toc-open:delay-[var(--duration)] fill-slate-100 border-md border-2 text-slate-400 bg-slate-200 text-slate-600" data-astro-cid-bvzihdzo data-icon="tabler/x">  <symbol id="ai:local:tabler/x"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"><path stroke="none" d="M0 0h24v24H0z"/><path d="M18 6 6 18M6 6l12 12"/></g></symbol> <use  xlink:href="#ai:local:tabler/x"></use> </svg> <svg width="1em" height="1em" viewBox="0 0 24 24" class="col-start-2 col-end-2 row-start-1 row-end-1 scale-0 transition-transform duration-[var(--duration)] ease-in group-data-toc-closed:scale-100 group-data-toc-closed:delay-[var(--duration)" data-astro-cid-bvzihdzo data-icon="tabler/list">  <symbol id="ai:local:tabler/list"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"><path stroke="none" d="M0 0h24v24H0z"/><path d="M9 6h11M9 12h11M9 18h11M5 6v.01M5 12v.01M5 18v.01"/></g></symbol> <use  xlink:href="#ai:local:tabler/list"></use> </svg> <div class="col-start-1 col-end-1 group-data-toc-closed:mx-2 truncate" data-astro-cid-bvzihdzo>
Open ToC
</div> </button> <div data-blog-post-toc-container data-preload class="lg:h-full lg:p-4 lg:ml-auto lg:group-data-toc-open:translate-x-0 lg:group-data-toc-open:scale-x-1 lg:group-data-toc-open:opacity-1 lg:group-data-toc-closed:translate-x-full lg:group-data-toc-closed:opacity-0 lg:group-data-toc-closed:scale-x-0 lg:group-data-toc-closed:pointer-events-none transition-[transform,opacity] duration-300 ease-in-out" data-astro-cid-bvzihdzo> <div class="hidden bg-slate-50 p-4 lg:flex lg:h-full lg:flex-col" data-astro-cid-obewoz47> <div class="flex items-center gap-2 h-10 flex-none" data-astro-cid-obewoz47> <svg width="1em" height="1em" viewBox="0 0 24 24" data-astro-cid-obewoz47 data-icon="tabler/list">   <use  xlink:href="#ai:local:tabler/list"></use> </svg> <b class="m-0" data-astro-cid-obewoz47>Table of contents</b> <div class="ml-auto flex items-center transition-transform duration-150 ease-in group-open:rotate-180 lg:hidden" data-astro-cid-obewoz47> <svg width="1em" height="1em" viewBox="0 0 24 24" data-astro-cid-obewoz47 data-icon="tabler/chevron-down">  <symbol id="ai:local:tabler/chevron-down"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"><path stroke="none" d="M0 0h24v24H0z"/><path d="m6 9 6 6 6-6"/></g></symbol> <use  xlink:href="#ai:local:tabler/chevron-down"></use> </svg> </div> </div> <!-- <TOCProgress client:load /> --> <nav data-toc-wrapper class="not-prose pt-4 h-auto min-h-0 lg:overflow-y-auto leading-6 [&#38;_a_*]:indent-0 [&#38;_ol]:m-0 [&#38;_ol]:list-none [&#38;_ol]:pl-4 [&#38;_ol_li]:my-4 [&#38;_ol_li[data-active]>a]:text-primary [&#38;_ol_li[data-active]>a:first-of-type]:text-zinc-800 [&#38;_ol_li[data-active]>a:first-of-type]:text-bold [&#38;_ol_li[data-active]]>a:text-zinc-800 [&#38;_ol_li]:relative [&#38;_ol_li_a:hover]:bg-hover [&#38;_ol_li_a]:block [&#38;_ol_li_a]:border-b-0 [&#38;_ol_li_a]:transition-colors [&#38;_ol_li_a]:duration-150 [&#38;_ol_ol]:pl-8 [&#38;_ol_ol_ol]:pl-12 [&#38;_ol_ol_ol_ol]:pl-16 [&#38;_ol_li_a]:text-zinc-300 [&#38;_ol_li_a]:text-[rgb(99, 102, 241)] [&#38;_ol_li_a]:no-underline [&#38;_ol_li_a:hover:first-of-type]:text-zinc-800 [&#38;_ol_li[data-active]_a:hover:first-of-type]:text-zinc-800 flex flex-row" data-astro-cid-obewoz47> <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();;(()=>{var b=Object.defineProperty;var f=(c,o,i)=>o in c?b(c,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):c[o]=i;var l=(c,o,i)=>(f(c,typeof o!="symbol"?o+"":o,i),i);var p;{let c={0:t=>m(t),1:t=>i(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(i(t)),5:t=>new Set(i(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t)},o=t=>{let[e,r]=t;return e in c?c[e](r):void 0},i=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([e,r])=>[e,o(r)]));customElements.get("astro-island")||customElements.define("astro-island",(p=class extends HTMLElement{constructor(){super(...arguments);l(this,"Component");l(this,"hydrator");l(this,"hydrate",async()=>{var d;if(!this.hydrator||!this.isConnected)return;let e=(d=this.parentElement)==null?void 0:d.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let r=this.querySelectorAll("astro-slot"),a={},h=this.querySelectorAll("template[data-astro-template]");for(let n of h){let s=n.closest(this.tagName);s!=null&&s.isSameNode(this)&&(a[n.getAttribute("data-astro-template")||"default"]=n.innerHTML,n.remove())}for(let n of r){let s=n.closest(this.tagName);s!=null&&s.isSameNode(this)&&(a[n.getAttribute("name")||"default"]=n.innerHTML)}let u;try{u=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(n){let s=this.getAttribute("component-url")||"<unknown>",y=this.getAttribute("component-export");throw y&&(s+=` (export ${y})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),n),n}await this.hydrator(this)(this.Component,u,a,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});l(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),r.disconnect(),this.childrenConnectedCallback()},r=new MutationObserver(()=>{var a;((a=this.lastChild)==null?void 0:a.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});r.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}start(){let e=JSON.parse(this.getAttribute("opts")),r=this.getAttribute("client");if(Astro[r]===void 0){window.addEventListener(`astro:${r}`,()=>this.start(),{once:!0});return}Astro[r](async()=>{let a=this.getAttribute("renderer-url"),[h,{default:u}]=await Promise.all([import(this.getAttribute("component-url")),a?import(a):()=>()=>{}]),d=this.getAttribute("component-export")||"default";if(!d.includes("."))this.Component=h[d];else{this.Component=h;for(let n of d.split("."))this.Component=this.Component[n]}return this.hydrator=u,this.hydrate},e,this)}attributeChangedCallback(){this.hydrate()}},l(p,"observedAttributes",["props"]),p))}})();</script><astro-island uid="12Xfyy" prefix="r1" component-url="/_astro/TOCIndicator.jDhRNJmh.js" component-export="default" renderer-url="/_astro/client.mYTtLqQB.js" props="{&quot;data-astro-cid-obewoz47&quot;:[0,true]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;TOCScroll&quot;,&quot;value&quot;:true}" await-children=""><div class="_wrapper_1fgdy_10"><div class="_container_1fgdy_16"><div class="_item_1fgdy_23" style="will-change:transform"></div></div></div><!--astro:end--></astro-island> <ol data-astro-toc="1"><li data-astro-toc="1"> <a href="#the-uncertain-future-of-rails-monorepos-in-december-2023">The uncertain future of rails monorepos in December 2023</a>  </li><li data-astro-toc="1"> <a href="#the-simplest-most-robust-way-to-bundle-a-react-frontend-in-your-rails-monorepo-at-the-end-of-2023">The simplest, most robust way to bundle a React frontend in your Rails monorepo, at the end of 2023</a> <ol data-astro-toc="2"><li data-astro-toc="2"> <a href="#why-hotwire-and-turbo-is-not-the-best-choice-today">Why Hotwire and turbo is not the best choice today</a>  </li></ol> </li></ol> </nav> </div> <details class="group px-horizontal-padding py-4 lg:hidden" aria-label="Table of contents" data-astro-cid-obewoz47> <summary class="list-none" data-astro-cid-obewoz47> <div class="align-center flex items-center gap-2" data-astro-cid-obewoz47> <svg width="1em" height="1em" viewBox="0 0 24 24" data-astro-cid-obewoz47 data-icon="tabler/list">   <use  xlink:href="#ai:local:tabler/list"></use> </svg> <h2 class="m-0" data-astro-cid-obewoz47>Table of contents</h2> <div class="ml-auto flex items-center transition-transform duration-150 ease-in group-open:rotate-180 lg:hidden" data-astro-cid-obewoz47> <svg width="1em" height="1em" viewBox="0 0 24 24" data-astro-cid-obewoz47 data-icon="tabler/chevron-down">   <use  xlink:href="#ai:local:tabler/chevron-down"></use> </svg> </div> </div> </summary> <nav data-toc-wrapper class="mt-4 [&#38;_ol]:m-0 [&#38;_ol]:list-outside [&#38;_ol]:px-horizontal-padding [&#38;_ol_li:not(:first-child)]:mt-1" data-astro-cid-obewoz47> <ol data-astro-toc="1"><li data-astro-toc="1"> <a href="#the-uncertain-future-of-rails-monorepos-in-december-2023">The uncertain future of rails monorepos in December 2023</a>  </li><li data-astro-toc="1"> <a href="#the-simplest-most-robust-way-to-bundle-a-react-frontend-in-your-rails-monorepo-at-the-end-of-2023">The simplest, most robust way to bundle a React frontend in your Rails monorepo, at the end of 2023</a> <ol data-astro-toc="2"><li data-astro-toc="2"> <a href="#why-hotwire-and-turbo-is-not-the-best-choice-today">Why Hotwire and turbo is not the best choice today</a>  </li></ol> </li></ol> </nav> </details>   </div> </aside> <!-- /** min-w-0 [&>pre]:my-8 [&>pre]:max-sm:full-bleed [&>[data-codeblock]]:my-8 --> <!-- [&>[data-codeblock]]:max-sm:full-bleed [&>[data-codeblock]_pre]:max-sm:rounded-none --> <div data-blog-post class="min-w-0" data-astro-cid-bvzihdzo> <div class="hero-image" data-astro-cid-bvzihdzo>  <div class="tags w-full max-w-xl mx-auto flex center justify-center" data-astro-cid-pjkakwps> <span class="tag mr-1" data-astro-cid-pjkakwps> <a href="/tags/rails" data-astro-cid-pjkakwps> <svg width="1em" height="1em" viewBox="0 0 24 24" class="stroke-primary fill-theme-primary" data-astro-cid-pjkakwps data-icon="rails">  <symbol id="ai:local:rails"><path fill="currentColor" d="M.741 19.365h8.36s-1.598-7.291 3.693-10.243l.134-.066c1.286-.637 4.907-2.431 10.702 1.854.19-.159.37-.286.37-.286s-5.503-5.492-11.63-4.878c-3.079.275-6.867 3.079-9.09 6.783C1.058 16.233.741 19.365.741 19.365Zm8.804-.783a10.682 10.682 0 0 1-.127-1.333l1.143.412c.063.498.159.963.254 1.376l-1.27-.455Zm-7.799-4.317L.529 13.82c-.201.455-.423.984-.529 1.27l1.217.444c.137-.359.36-.878.529-1.269Zm7.831.296.857.677c.042-.413.116-.825.222-1.238l-.762-.603c-.137.391-.233.783-.317 1.164Zm2.042-2.646-.508-.762c.191-.243.413-.486.656-.709l.476.72a5.958 5.958 0 0 0-.624.751ZM4.19 8.878l.752.656c-.254.265-.498.551-.72.836l-.815-.698c.244-.265.508-.529.783-.794Zm9.799 1.027-.243-.73c.265-.117.571-.233.931-.339l.233.698a6.82 6.82 0 0 0-.921.371Zm3.122-.656.042-.667c.339.021.688.064 1.048.138l-.042.656a5.859 5.859 0 0 0-1.048-.127ZM8.942 6.392l-.476-.731c-.265.138-.54.286-.826.455l.487.741c.275-.169.54-.328.815-.465Zm9.217-.053.042-.709c-.095-.053-.36-.18-1.026-.371l-.043.699c.349.116.688.243 1.027.381ZM13.238 5.28h.106l-.212-.645c-.328 0-.666.021-1.016.063l.201.625a8.87 8.87 0 0 1 .921-.043Z"/></symbol> <use  xlink:href="#ai:local:rails"></use> </svg> rails </a> ,  </span><span class="tag mr-1" data-astro-cid-pjkakwps> <a href="/tags/hotwire" data-astro-cid-pjkakwps> <svg width="1em" height="1em" viewBox="0 0 24 24" class="stroke-primary fill-theme-primary" data-astro-cid-pjkakwps data-icon="hotwire">  <symbol id="ai:local:hotwire"><path fill="currentColor" d="m16.764 6.917-3.48.81L16.32 0 7.236 11.705l4.334-.854-4.087 7.982 2.364-.532L7.456 24l7.51-8.111-2.77.64 4.568-9.612z"/></symbol> <use  xlink:href="#ai:local:hotwire"></use> </svg> hotwire </a> ,  </span><span class="tag mr-1" data-astro-cid-pjkakwps> <a href="/tags/monorepo" data-astro-cid-pjkakwps> <svg width="1em" height="1em" viewBox="0 0 24 24" class="stroke-primary fill-theme-primary" data-astro-cid-pjkakwps data-icon="tabler/stack">  <symbol id="ai:local:tabler/stack"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"><path stroke="none" d="M0 0h24v24H0z"/><path d="m12 6-8 4 8 4 8-4-8-4m-8 8 8 4 8-4"/></g></symbol> <use  xlink:href="#ai:local:tabler/stack"></use> </svg> monorepo </a>  </span> </div>  <div class="prose" data-astro-cid-bvzihdzo> <div class="title" data-astro-cid-bvzihdzo> <span class="date mb-3" data-astro-cid-bvzihdzo> <time datetime="2023-12-19T05:00:00.000Z"> Dec 19, 2023 </time>  </span> <astro-island uid="Z1ye60V" component-url="/_astro/PostStats.aTcCcsp0.js" component-export="default" renderer-url="/_astro/client.bWR2MAd2.js" props="{&quot;slug&quot;:[0,&quot;rails-react-monorepos-2023&quot;],&quot;data-astro-cid-bvzihdzo&quot;:[0,true]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;PostStats&quot;,&quot;value&quot;:true}" await-children=""><span class="emdash" data-svelte-h="svelte-14zf0s3">—</span> <span class="post-stats__views svelte-xfpbcr">0 views</span><!--astro:end--></astro-island> <h1 class="text-3xl" data-astro-cid-bvzihdzo>The state of rails monorepos in December 2023</h1> <hr class="not-prose" data-astro-cid-bvzihdzo> </div>  <div class="flex w-full flex-col gap-8 pb-4 transition-all md:flex-row"> <astro-island uid="Z1PS6sL" component-url="/_astro/ZoomImage.wgnhuKA6.js" component-export="default" renderer-url="/_astro/client.bWR2MAd2.js" props="{&quot;src&quot;:[0,&quot;/_astro/hotwire._LPxur_h.png&quot;],&quot;alt&quot;:[0,&quot;Ruby on Rails and Hotwire&quot;],&quot;caption&quot;:[0,&quot;Ruby on Rails and Hotwire&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;ZoomImage&quot;,&quot;value&quot;:true}" await-children=""> <button aria-label="Open full-size image"><figure class="my-8 bg-surface rounded-md py-1"><astro-slot> <img src="/_astro/hotwire._LPxur_h_Z13RLnC.webp" srcset="/_astro/hotwire._LPxur_h_prPcS.webp 240w, /_astro/hotwire._LPxur_h_Z1vrcb2.webp 540w, /_astro/hotwire._LPxur_h_vBBdC.webp 720w, /_astro/hotwire._LPxur_h_Z13RLnC.webp 3710w" sizes="(max-width: 360px) 240px, (max-width: 720px) 540px, (max-width: 1600px) 720px, 3710px" alt="Ruby on Rails and Hotwire" width="3710" height="2088" loading="lazy" decoding="async"> </astro-slot> <article class="prose text-center max-w-content mb-2 prose-gray text-base italic"><figcaption>Ruby on Rails and Hotwire</figcaption></article></figure></button> <dialog class="p-3 animate-dialog-in animate-dialog-out svelte-fu0dbb  bg-gray-50"><button class="absolute top-0 right-0 p-2 border border-radius-md bg-gray-100 border-color-gray-300 border-1 w-8 h-8 text-gray-400 hover:text-red-400 text-base font-bold leading-5" aria-label="Close" data-svelte-h="svelte-5ya9si">X</button> <figure class="bg-surface rounded-md py-1"><img src="/_astro/hotwire._LPxur_h.png" alt="Ruby on Rails and Hotwire" class="svelte-fu0dbb"> <article class="prose text-center max-w-content mb-2 prose-gray"><figcaption>Ruby on Rails and Hotwire</figcaption></article></figure> </dialog><!--astro:end--></astro-island> </div> <h2 id="the-uncertain-future-of-rails-monorepos-in-december-2023">The uncertain future of rails monorepos in December 2023</h2>
<p>Rails no longer has a default way to handle becoming a <em>monorepo</em> with a
frontend. Previously, it came with <code>webpacker</code>, and as the Javascript ecosystem
has evolved, it makes sense for Rails to decouple itself from the frontend build
process. So, <strong>What build system should you use for a rails-react <em>monorepo</em> in
2023?</strong> My current recommendation is <code>vite-rails</code>. <code>vite</code> is the way to go
unless you are working with <code>bun</code> or <code>deno</code>, which both offer a Vite-like
experience for their own runtimes. I also think <code>jsbundling-rails</code> with <code>bun</code> or
<code>esbuild</code> is a solid choice. Thinking long term, I think <code>vite</code> is the best
choice, because it is the most popular outside of the Rails ecosystem, and it is
the most likely to be supported in the future. It’s a solid mainstream choice
that is likely to be supported by the Rails community given the relationship
Vite has to Next.js and Vue. Tooling like Vite is essential for adoption of
frontend frameworks today: Next.js, Vue.js, VueKit, Svelte, SvelteKit, and Nuxt.js.</p>
<h2 id="the-simplest-most-robust-way-to-bundle-a-react-frontend-in-your-rails-monorepo-at-the-end-of-2023">The simplest, most robust way to bundle a React frontend in your Rails <em>monorepo</em>, at the end of 2023</h2>
<p>So, what build system should you use for a rails-react <em>monorepo</em> in 2023?</p>
<p>My 2c, is that you should create a separate app (Next.js, or any edge-hosted
SPA), and use rails solely as a backend API. This way, you free yourself of the
questionable future of Rails’ frontend interoperability, and you avoid having to
ever render a page on the server with rails that is sent to the frontend, only
to have further rendering on the frontend by javascript. For those who are still
upgrading to the latest Rails, or simply want to feel like they did in 2018,
Shakapacker is available as a drop-in replacement for webpacker.</p>
<p>So, jsbundling-rails and cssbundling-rails is all you need, safely ignore the
rest. Took me a few hours to get to this conclusion when upgrading an old Rails
app.</p>
<p>Links:</p>
<ul>
<li>[[Vite-rails]]</li>
</ul>
<h3 id="why-hotwire-and-turbo-is-not-the-best-choice-today">Why Hotwire and turbo is not the best choice today</h3>
<ol>
<li>
<p>There is not a lot of documentation</p>
</li>
<li>
<p>They don’t provide any testing guidelines, the best I’ve found is hand-wavy
test-with-a-browser stuff</p>
</li>
<li>
<p>Everything is essentially global</p>
</li>
<li>
<p>Functions are disconnected from their parameters, i.e. I can’t tell which
bits of data a function is using without digging through a bunch of code.</p>
</li>
<li>
<p>Putting state in your HTML is tricky if you also want to modify the DOM.</p>
</li>
<li>
<p>Their naming scheme is cumbersome:</p>
<ol>
<li>e.g. data-controller=“using-a—sub-directory”</li>
<li>data-target=“some—nested—target-has-a.function”</li>
<li>that is, the fact that everything is location-in-your-code-file-structure
based. The framework lacking a layer of abstraction that would ;e</li>
</ol>
</li>
<li>
<p>Turbo streams and data frames are simply not relevant to the current state of
the web. I appreciate how other frameworks expand on the concept of the DOM
in order to deliver a superior  experience.</p>
</li>
</ol>
<p>And a lot of other small things.</p>
<p>Svelte, AstroJS are light-years ahead of Hotwire, and their feature-set is
comparable against Rails even - they provide total backend solutions. The Node.js
landscape has several “batteries-included” frameworks that provide utilities to
deal with sessions, cookies, and other things that Rails provides — this
includes SvelteKit, Nuxt, Next.js, Nest.js, and Deno Fresh. Node is definitely a great
replacement for Rails.</p>
<p>Turbo can be summarized as, being the right choice, if: your favorite company is
Basecamp and you want to struggle to implement concepts that are actually easily
implement in React.</p>
<p>Compared to other modern frameworks, Stimulus involves writing what some may
consider to be <em>hacky</em> code — that is, code that is not easily
understandable or written in a way that is not easily maintainable. The various
data attributes here do not provide a clear way to understand what is happening,
and the word target seems totally unnecessary given frameworks parse abstract
syntax trees behind the scenes in order to prove developers much more ergonomic
ways of doing things nowadays.</p>
<pre class="shiki shaku material-theme-darker" style="color:#EEFFFF;background-color:#212121"><div class="code-container"><code><div class="line"><span style="color: #89DDFF">&#x3C;</span><span style="color: #F07178">div</span><span style="color: #89DDFF"> </span><span style="color: #C792EA">data-controller</span><span style="color: #89DDFF">=</span><span style="color: #89DDFF">"</span><span style="color: #C3E88D">hello</span><span style="color: #89DDFF">"</span><span style="color: #89DDFF">></span></div><div class="line"><span style="color: #EEFFFF">  </span><span style="color: #89DDFF">&#x3C;</span><span style="color: #F07178">input</span><span style="color: #89DDFF"> </span><span style="color: #C792EA">data-hello-target</span><span style="color: #89DDFF">=</span><span style="color: #89DDFF">"</span><span style="color: #C3E88D">name</span><span style="color: #89DDFF">"</span><span style="color: #89DDFF"> </span><span style="color: #C792EA">type</span><span style="color: #89DDFF">=</span><span style="color: #89DDFF">"</span><span style="color: #C3E88D">text</span><span style="color: #89DDFF">"</span><span style="color: #89DDFF">></span></div><div class="line"></div><div class="line"><span style="color: #EEFFFF">  </span><span style="color: #89DDFF">&#x3C;</span><span style="color: #F07178">button</span><span style="color: #89DDFF"> </span><span style="color: #C792EA">data-action</span><span style="color: #89DDFF">=</span><span style="color: #89DDFF">"</span><span style="color: #C3E88D">click->hello#greet</span><span style="color: #89DDFF">"</span><span style="color: #89DDFF">></span><span style="color: #EEFFFF">Greet</span><span style="color: #89DDFF">&#x3C;/</span><span style="color: #F07178">button</span><span style="color: #89DDFF">></span></div><div class="line"></div><div class="line"><span style="color: #EEFFFF">  </span><span style="color: #89DDFF">&#x3C;</span><span style="color: #F07178">span</span><span style="color: #89DDFF"> </span><span style="color: #C792EA">data-hello-target</span><span style="color: #89DDFF">=</span><span style="color: #89DDFF">"</span><span style="color: #C3E88D">output</span><span style="color: #89DDFF">"</span><span style="color: #89DDFF">>&#x3C;/</span><span style="color: #F07178">span</span><span style="color: #89DDFF">></span></div><div class="line"><span style="color: #89DDFF">&#x3C;/</span><span style="color: #F07178">div</span><span style="color: #89DDFF">></span></div></code></div></pre>
<pre class="shiki shaku material-theme-darker" style="color:#EEFFFF;background-color:#212121"><div class="code-container"><code><div class="line"><span style="color: #545454">// hello_controller.js</span></div><div class="line"><span style="color: #89DDFF">import</span><span style="color: #EEFFFF"> </span><span style="color: #89DDFF">{</span><span style="color: #F07178"> </span><span style="color: #EEFFFF">Controller</span><span style="color: #F07178"> </span><span style="color: #89DDFF">}</span><span style="color: #EEFFFF"> </span><span style="color: #89DDFF">from</span><span style="color: #EEFFFF"> </span><span style="color: #89DDFF">"</span><span style="color: #C3E88D">@hotwired/stimulus</span><span style="color: #89DDFF">"</span></div><div class="line"></div><div class="line"><span style="color: #89DDFF">export</span><span style="color: #EEFFFF"> </span><span style="color: #89DDFF">default</span><span style="color: #EEFFFF"> </span><span style="color: #C792EA">class</span><span style="color: #EEFFFF"> </span><span style="color: #C792EA">extends</span><span style="color: #EEFFFF"> </span><span style="color: #FFCB6B">Controller</span><span style="color: #EEFFFF"> </span><span style="color: #89DDFF">{</span></div><div class="line"><span style="color: #EEFFFF">  </span><span style="color: #C792EA">static</span><span style="color: #EEFFFF"> </span><span style="color: #F07178">targets</span><span style="color: #EEFFFF"> </span><span style="color: #89DDFF">=</span><span style="color: #EEFFFF"> [ </span><span style="color: #89DDFF">"</span><span style="color: #C3E88D">name</span><span style="color: #89DDFF">"</span><span style="color: #89DDFF">,</span><span style="color: #EEFFFF"> </span><span style="color: #89DDFF">"</span><span style="color: #C3E88D">output</span><span style="color: #89DDFF">"</span><span style="color: #EEFFFF"> ]</span></div><div class="line"></div><div class="line"><span style="color: #EEFFFF">  </span><span style="color: #F07178">greet</span><span style="color: #89DDFF">()</span><span style="color: #EEFFFF"> </span><span style="color: #89DDFF">{</span></div><div class="line"><span style="color: #F07178">    </span><span style="color: #89DDFF">this.</span><span style="color: #EEFFFF">outputTarget</span><span style="color: #89DDFF">.</span><span style="color: #EEFFFF">textContent</span><span style="color: #F07178"> </span><span style="color: #89DDFF">=</span></div><div class="line"><span style="color: #F07178">      </span><span style="color: #89DDFF">`</span><span style="color: #C3E88D">Hello, </span><span style="color: #89DDFF">${</span><span style="color: #89DDFF">this.</span><span style="color: #EEFFFF">nameTarget</span><span style="color: #89DDFF">.</span><span style="color: #EEFFFF">value</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D">!</span><span style="color: #89DDFF">`</span></div><div class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">}</span></div><div class="line"><span style="color: #89DDFF">}</span></div></code></div></pre>
<p>It brings back some of the component lifecycle events from older versions of
react, and requires you to sprinkle the words “target” over your HTML, which is
actually difficult to parse. Instead of looking for certain data attributes or
values, Stimulus looks for suffixes of words - this is cumbersome and pointless
with the current features of Common JS and ESModules.</p>  <a data-back-to-top data-astro-cid-bvzihdzo class="[&#38;_svg]:fill-theme-amethyst-100; align-middle text-sm text-amethyst-800 no-underline underline-offset-4 hover:text-amethyst-900 hover:no-underline [&#38;:hover_svg]:bg-amethyst-200 [&#38;:hover_svg]:stroke-amethyst-500 [&#38;:hover_svg]:text-amethyst-500 [&#38;_hover_span]:underline [&#38;_span]:underline [&#38;_svg]:bg-amethyst-100"> <span class="underline underline-offset-4">Back to top</span> <svg width="1em" height="1em" viewBox="0 0 24 24" class="inline-block" data-icon="tabler/chevron-up">  <symbol id="ai:local:tabler/chevron-up"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"><path stroke="none" d="M0 0h24v24H0z"/><path d="m6 15 6-6 6 6"/></g></symbol> <use  xlink:href="#ai:local:tabler/chevron-up"></use> </svg> </a> </div> </div> </div> </div>  </article>  </div> </main> <footer data-astro-cid-sz7xmlte> <div class="max-w-3xl" data-astro-cid-sz7xmlte>
&copy; 2024 Aaron Lifton. All rights reserved.
<div class="social-links" data-astro-cid-sz7xmlte> <a href="https://linkedin.com/aaronlifton" target="_blank" data-astro-cid-sz7xmlte> <span class="sr-only" data-astro-cid-sz7xmlte>Are you a recruiter? Connect with Aaron on LinkedIn</span> <svg width="32" height="32" viewBox="0 0 24 24" data-astro-cid-sz7xmlte data-icon="linkedin">   <use  xlink:href="#ai:local:linkedin"></use> </svg> </a> <a href="https://github.com/aaronlifton" target="_blank" data-astro-cid-sz7xmlte> <span class="sr-only" data-astro-cid-sz7xmlte>Go to Aaron's Github page</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" astro-icon="social/github" data-astro-cid-sz7xmlte><path fill="currentColor" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z" data-astro-cid-sz7xmlte></path></svg> </a> </div> </div> </footer>  </body></html>  