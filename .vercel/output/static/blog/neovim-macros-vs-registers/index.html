<!DOCTYPE html><html lang="en" class="selection:text-on-primary h-full min-h-0 text-base selection:bg-primary/25 sm:text-lg scroll-pt-nav-height scroll-smooth sm:scroll-pt-0"> <head> <!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v4.3.3"><!-- Font preloads --><link rel="preload" href="/fonts/atkinson-regular.woff" as="font" type="font/woff" crossorigin><link rel="preload" href="/fonts/atkinson-bold.woff" as="font" type="font/woff" crossorigin><!-- Canonical URL --><link rel="canonical" href="https://example.com/blog/neovim-macros-vs-registers/"><!-- Primary Meta Tags --><title>Neovim macros vs normal mode</title><meta name="title" content="Neovim macros vs normal mode"><meta name="description" content="A discussion on the benefits of using normal mode commands versus macros in Neovim."><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://example.com/blog/neovim-macros-vs-registers/"><meta property="og:title" content="Neovim macros vs normal mode"><meta property="og:description" content="A discussion on the benefits of using normal mode commands versus macros in Neovim."><meta property="og:image" content="https://example.com/_astro/macros.qRd2izsX.png"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://example.com/blog/neovim-macros-vs-registers/"><meta property="twitter:title" content="Neovim macros vs normal mode"><meta property="twitter:description" content="A discussion on the benefits of using normal mode commands versus macros in Neovim."><meta property="twitter:image" content="https://example.com/_astro/macros.qRd2izsX.png"><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"> <link rel="stylesheet" href="/_astro/_slug_.fPnpziMM.css" />
<link rel="stylesheet" href="/_astro/_slug_.iYS_UISD.css" />
<style>dialog.svelte-fu0dbb.svelte-fu0dbb{z-index:1;--tw-bg-opacity:1;background-color:rgba(240,243,255,var(--tw-bg-opacity));transition-property:all;transition-timing-function:cubic-bezier(.23,1,.32,1);transition-delay:.15s;transition-duration:.3s;transition-timing-function:cubic-bezier(.4,0,.2,1)}@supports (color: color(display-p3 0 0 0)){dialog.svelte-fu0dbb.svelte-fu0dbb{background-color:color(display-p3 .94177 .95165 .99851 / var(--tw-bg-opacity))}}@supports (color: oklab(0% 0 0)){dialog.svelte-fu0dbb.svelte-fu0dbb{background-color:oklch(.964844 .01775 275 / var(--tw-bg-opacity))}}dialog.svelte-fu0dbb.svelte-fu0dbb::backdrop{transition:backdrop .5s ease-in-out;background:#0000004d}dialog[open].svelte-fu0dbb.svelte-fu0dbb{--tw-bg-opacity:1;background-color:rgba(250,251,254,var(--tw-bg-opacity))}@supports (color: oklab(0% 0 0)){dialog[open].svelte-fu0dbb.svelte-fu0dbb{background-color:oklch(.988281 .0046875 275 / var(--tw-bg-opacity))}}dialog.svelte-fu0dbb img.svelte-fu0dbb{margin-bottom:1rem}
</style><script type="module" src="/_astro/hoisted.rNJk9NOy.js"></script></head> <body>  <header class="grid grid-cols-layout antialiased" data-astro-cid-3ef6ksr2> <nav class="h-nav-height sm:col-content" data-astro-cid-3ef6ksr2> <h2 data-astro-cid-3ef6ksr2> <a href="/" data-astro-cid-3ef6ksr2>Aaron&#39;s Dev Blog</a> </h2> <div class="internal-links select-none" data-astro-cid-3ef6ksr2> <a href="/" data-astro-cid-3ef6ksr2 data-astro-cid-eimmu3lg> Home </a>  <a href="/blog/1" data-astro-cid-3ef6ksr2 data-astro-cid-eimmu3lg> Blog </a>  <a href="/tags" data-astro-cid-3ef6ksr2 data-astro-cid-eimmu3lg> Tags </a>  <a href="/about" data-astro-cid-3ef6ksr2 data-astro-cid-eimmu3lg> About </a>  </div> <div class="social-links select-none" data-astro-cid-3ef6ksr2> <a href="https://linkedin.com/in/aaronlifton" target="_blank" data-astro-cid-3ef6ksr2> <span class="sr-only" data-astro-cid-3ef6ksr2>Are you a recruiter? Connect with Aaron on LinkedIn</span> <svg width="32" height="32" viewBox="0 0 24 24" data-astro-cid-3ef6ksr2 data-icon="linkedin">  <symbol id="ai:local:linkedin"><path fill="currentColor" d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 0 1-2.063-2.065 2.064 2.064 0 1 1 2.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></symbol> <use  xlink:href="#ai:local:linkedin"></use> </svg> </a> <a href="https://github.com/aaronlifton" target="_blank" data-astro-cid-3ef6ksr2> <span class="sr-only" data-astro-cid-3ef6ksr2>Go to Aaron's GitHub repo</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" data-astro-cid-3ef6ksr2><path fill="currentColor" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z" data-astro-cid-3ef6ksr2></path></svg> </a> </div> </nav> </header>   <main> <div class="px-0 sm:col-content">    <article class="prose">  <div data-blog-post-container data-toc="[object Object]" class="group flex flex-col lg:flex-row-reverse lg:gap-8 lg:flex-row-reverse" data-astro-cid-bvzihdzo> <aside style="--offset-from-top:1rem" class="relative shrink-0 mb-0 lg:mb-8 lg:ml-auto lg:mb-0 lg:basis-1/3 lg:sticky lg:top-[var(--offset-from-top)] lg:h-[calc(100vh-var(--offset-from-top)_*_2)] [&#38;_h2]:m-0 max-w-prose" data-astro-cid-bvzihdzo> <button type="button" data-toggle-toc="true" data-open-toc-label="Open ToC" data-closed-toc-label="Close ToC" aria-label="Close Table of Contents" style="--duration:150ms" data-preload="true" data-astro-cid-bvzihdzo="true" class="bg-surface hover:bg-hover text-on-background disabled:bg-disabled disabled:text-on-disabled disabled:hover:cursor-not-allowed disabled:hover:bg-disabled hover:text-primary min-w-[40px] h-[40px] justify-center items-center rounded-full z-1 absolute top-4 right-4 hidden lg:grid lg:min-w-0 lg:group-data-toc-open:grid-cols-[0fr_max-content] lg:group-data-toc-closed:grid-cols-[1fr_max-content] transition-all duration-[var(--duration)] ease-in-out overflow-hidden lg:justify-center p-6"> <svg width="1em" height="1em" viewBox="0 0 24 24" class="col-start-2 col-end-2 row-start-1 row-end-1 scale-0 transition-transform duration-[var(--duration)] ease-out group-data-toc-open:scale-100 group-data-toc-open:delay-[var(--duration)] fill-slate-100 border-md border-2 text-slate-400 bg-slate-200 text-slate-600" data-astro-cid-bvzihdzo data-icon="tabler/x">  <symbol id="ai:local:tabler/x"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"><path stroke="none" d="M0 0h24v24H0z"/><path d="M18 6 6 18M6 6l12 12"/></g></symbol> <use  xlink:href="#ai:local:tabler/x"></use> </svg> <svg width="1em" height="1em" viewBox="0 0 24 24" class="col-start-2 col-end-2 row-start-1 row-end-1 scale-0 transition-transform duration-[var(--duration)] ease-in group-data-toc-closed:scale-100 group-data-toc-closed:delay-[var(--duration)" data-astro-cid-bvzihdzo data-icon="tabler/list">  <symbol id="ai:local:tabler/list"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"><path stroke="none" d="M0 0h24v24H0z"/><path d="M9 6h11M9 12h11M9 18h11M5 6v.01M5 12v.01M5 18v.01"/></g></symbol> <use  xlink:href="#ai:local:tabler/list"></use> </svg> <div class="col-start-1 col-end-1 group-data-toc-closed:mx-2 truncate" data-astro-cid-bvzihdzo>
Open ToC
</div> </button> <div data-blog-post-toc-container data-preload class="lg:h-full lg:p-4 lg:ml-auto lg:group-data-toc-open:translate-x-0 lg:group-data-toc-open:scale-x-1 lg:group-data-toc-open:opacity-1 lg:group-data-toc-closed:translate-x-full lg:group-data-toc-closed:opacity-0 lg:group-data-toc-closed:scale-x-0 lg:group-data-toc-closed:pointer-events-none transition-[transform,opacity] duration-300 ease-in-out" data-astro-cid-bvzihdzo> <div class="hidden bg-slate-50 p-4 lg:flex lg:h-full lg:flex-col" data-astro-cid-obewoz47> <div class="flex items-center gap-2 h-10 flex-none" data-astro-cid-obewoz47> <svg width="1em" height="1em" viewBox="0 0 24 24" data-astro-cid-obewoz47 data-icon="tabler/list">   <use  xlink:href="#ai:local:tabler/list"></use> </svg> <b class="m-0" data-astro-cid-obewoz47>Table of contents</b> <div class="ml-auto flex items-center transition-transform duration-150 ease-in group-open:rotate-180 lg:hidden" data-astro-cid-obewoz47> <svg width="1em" height="1em" viewBox="0 0 24 24" data-astro-cid-obewoz47 data-icon="tabler/chevron-down">  <symbol id="ai:local:tabler/chevron-down"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"><path stroke="none" d="M0 0h24v24H0z"/><path d="m6 9 6 6 6-6"/></g></symbol> <use  xlink:href="#ai:local:tabler/chevron-down"></use> </svg> </div> </div> <!-- <TOCProgress client:load /> --> <nav data-toc-wrapper class="not-prose pt-4 h-auto min-h-0 lg:overflow-y-auto leading-6 [&#38;_a_*]:indent-0 [&#38;_ol]:m-0 [&#38;_ol]:list-none [&#38;_ol]:pl-4 [&#38;_ol_li]:my-4 [&#38;_ol_li[data-active]>a]:text-primary [&#38;_ol_li[data-active]>a:first-of-type]:text-zinc-800 [&#38;_ol_li[data-active]>a:first-of-type]:text-bold [&#38;_ol_li[data-active]]>a:text-zinc-800 [&#38;_ol_li]:relative [&#38;_ol_li_a:hover]:bg-hover [&#38;_ol_li_a]:block [&#38;_ol_li_a]:border-b-0 [&#38;_ol_li_a]:transition-colors [&#38;_ol_li_a]:duration-150 [&#38;_ol_ol]:pl-8 [&#38;_ol_ol_ol]:pl-12 [&#38;_ol_ol_ol_ol]:pl-16 [&#38;_ol_li_a]:text-zinc-300 [&#38;_ol_li_a]:text-[rgb(99, 102, 241)] [&#38;_ol_li_a]:no-underline [&#38;_ol_li_a:hover:first-of-type]:text-zinc-800 [&#38;_ol_li[data-active]_a:hover:first-of-type]:text-zinc-800 flex flex-row" data-astro-cid-obewoz47> <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();;(()=>{var b=Object.defineProperty;var f=(c,o,i)=>o in c?b(c,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):c[o]=i;var l=(c,o,i)=>(f(c,typeof o!="symbol"?o+"":o,i),i);var p;{let c={0:t=>m(t),1:t=>i(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(i(t)),5:t=>new Set(i(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t)},o=t=>{let[e,r]=t;return e in c?c[e](r):void 0},i=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([e,r])=>[e,o(r)]));customElements.get("astro-island")||customElements.define("astro-island",(p=class extends HTMLElement{constructor(){super(...arguments);l(this,"Component");l(this,"hydrator");l(this,"hydrate",async()=>{var d;if(!this.hydrator||!this.isConnected)return;let e=(d=this.parentElement)==null?void 0:d.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let r=this.querySelectorAll("astro-slot"),a={},h=this.querySelectorAll("template[data-astro-template]");for(let n of h){let s=n.closest(this.tagName);s!=null&&s.isSameNode(this)&&(a[n.getAttribute("data-astro-template")||"default"]=n.innerHTML,n.remove())}for(let n of r){let s=n.closest(this.tagName);s!=null&&s.isSameNode(this)&&(a[n.getAttribute("name")||"default"]=n.innerHTML)}let u;try{u=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(n){let s=this.getAttribute("component-url")||"<unknown>",y=this.getAttribute("component-export");throw y&&(s+=` (export ${y})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),n),n}await this.hydrator(this)(this.Component,u,a,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});l(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),r.disconnect(),this.childrenConnectedCallback()},r=new MutationObserver(()=>{var a;((a=this.lastChild)==null?void 0:a.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});r.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}start(){let e=JSON.parse(this.getAttribute("opts")),r=this.getAttribute("client");if(Astro[r]===void 0){window.addEventListener(`astro:${r}`,()=>this.start(),{once:!0});return}Astro[r](async()=>{let a=this.getAttribute("renderer-url"),[h,{default:u}]=await Promise.all([import(this.getAttribute("component-url")),a?import(a):()=>()=>{}]),d=this.getAttribute("component-export")||"default";if(!d.includes("."))this.Component=h[d];else{this.Component=h;for(let n of d.split("."))this.Component=this.Component[n]}return this.hydrator=u,this.hydrate},e,this)}attributeChangedCallback(){this.hydrate()}},l(p,"observedAttributes",["props"]),p))}})();</script><astro-island uid="12Xfyy" prefix="r1" component-url="/_astro/TOCIndicator.jDhRNJmh.js" component-export="default" renderer-url="/_astro/client.mYTtLqQB.js" props="{&quot;data-astro-cid-obewoz47&quot;:[0,true]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;TOCScroll&quot;,&quot;value&quot;:true}" await-children=""><div class="_wrapper_1fgdy_10"><div class="_container_1fgdy_16"><div class="_item_1fgdy_23" style="will-change:transform"></div></div></div><!--astro:end--></astro-island> <ol data-astro-toc="1"><li data-astro-toc="1"> <a href="#why-normal-mode">Why normal mode</a>  </li><li data-astro-toc="1"> <a href="#global-commands">Global commands</a>  </li><li data-astro-toc="1"> <a href="#another-example">Another example</a>  </li></ol> </nav> </div> <details class="group px-horizontal-padding py-4 lg:hidden" aria-label="Table of contents" data-astro-cid-obewoz47> <summary class="list-none" data-astro-cid-obewoz47> <div class="align-center flex items-center gap-2" data-astro-cid-obewoz47> <svg width="1em" height="1em" viewBox="0 0 24 24" data-astro-cid-obewoz47 data-icon="tabler/list">   <use  xlink:href="#ai:local:tabler/list"></use> </svg> <h2 class="m-0" data-astro-cid-obewoz47>Table of contents</h2> <div class="ml-auto flex items-center transition-transform duration-150 ease-in group-open:rotate-180 lg:hidden" data-astro-cid-obewoz47> <svg width="1em" height="1em" viewBox="0 0 24 24" data-astro-cid-obewoz47 data-icon="tabler/chevron-down">   <use  xlink:href="#ai:local:tabler/chevron-down"></use> </svg> </div> </div> </summary> <nav data-toc-wrapper class="mt-4 [&#38;_ol]:m-0 [&#38;_ol]:list-outside [&#38;_ol]:px-horizontal-padding [&#38;_ol_li:not(:first-child)]:mt-1" data-astro-cid-obewoz47> <ol data-astro-toc="1"><li data-astro-toc="1"> <a href="#why-normal-mode">Why normal mode</a>  </li><li data-astro-toc="1"> <a href="#global-commands">Global commands</a>  </li><li data-astro-toc="1"> <a href="#another-example">Another example</a>  </li></ol> </nav> </details>   </div> </aside> <!-- /** min-w-0 [&>pre]:my-8 [&>pre]:max-sm:full-bleed [&>[data-codeblock]]:my-8 --> <!-- [&>[data-codeblock]]:max-sm:full-bleed [&>[data-codeblock]_pre]:max-sm:rounded-none --> <div data-blog-post class="min-w-0" data-astro-cid-bvzihdzo> <div class="hero-image" data-astro-cid-bvzihdzo>  <div class="tags w-full max-w-xl mx-auto flex center justify-center" data-astro-cid-pjkakwps> <span class="tag mr-1" data-astro-cid-pjkakwps> <a href="/tags/neovim" data-astro-cid-pjkakwps> <svg width="1em" height="1em" viewBox="0 0 24 24" class="stroke-primary fill-theme-primary" data-astro-cid-pjkakwps data-icon="neovim">  <symbol id="ai:local:neovim"><path fill="currentColor" d="M2.214 4.954v13.615L7.655 24V10.314L3.312 3.845 2.214 4.954zm4.999 17.98-4.557-4.548V5.136l.59-.596 3.967 5.908v12.485zm14.573-4.457-.862.937-4.24-6.376V0l5.068 5.092.034 13.385zM7.431.001l12.998 19.835-3.637 3.637L3.787 3.683 7.43 0z"/></symbol> <use  xlink:href="#ai:local:neovim"></use> </svg> neovim </a> ,  </span><span class="tag mr-1" data-astro-cid-pjkakwps> <a href="/tags/quick tips" data-astro-cid-pjkakwps> <svg width="1em" height="1em" viewBox="0 0 24 24" class="stroke-primary fill-theme-primary" data-astro-cid-pjkakwps data-icon="tabler/bulb-light">  <symbol id="ai:local:tabler/bulb-light"><g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"><path d="M0 0h24v24H0zm3 12h1m8-9v1m8 8h1M5.6 5.6l.7.7m12.1-.7-.7.7"/><path d="M9 16a5 5 0 1 1 6 0 3.5 3.5 0 0 0-1 3 2 2 0 0 1-4 0 3.5 3.5 0 0 0-1-3m.7 1h4.6"/></g></symbol> <use  xlink:href="#ai:local:tabler/bulb-light"></use> </svg> quick tips </a>  </span> </div>  <div class="prose" data-astro-cid-bvzihdzo> <div class="title" data-astro-cid-bvzihdzo> <span class="date mb-3" data-astro-cid-bvzihdzo> <time datetime="2023-12-19T05:00:00.000Z"> Dec 19, 2023 </time>  </span> <astro-island uid="Z2l9ljx" component-url="/_astro/PostStats.aTcCcsp0.js" component-export="default" renderer-url="/_astro/client.bWR2MAd2.js" props="{&quot;slug&quot;:[0,&quot;neovim-macros-vs-registers&quot;],&quot;data-astro-cid-bvzihdzo&quot;:[0,true]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;PostStats&quot;,&quot;value&quot;:true}" await-children=""><span class="emdash" data-svelte-h="svelte-14zf0s3">‚Äî</span> <span class="post-stats__views svelte-xfpbcr">0 views</span><!--astro:end--></astro-island> <h1 class="text-3xl" data-astro-cid-bvzihdzo>Neovim macros vs normal mode</h1> <hr class="not-prose" data-astro-cid-bvzihdzo> </div>  <div class="flex w-full flex-col gap-8 pb-4 transition-all md:flex-row"> <astro-island uid="1AEDGu" component-url="/_astro/ZoomImage.wgnhuKA6.js" component-export="default" renderer-url="/_astro/client.bWR2MAd2.js" props="{&quot;src&quot;:[0,&quot;/_astro/macros.qRd2izsX.png&quot;],&quot;alt&quot;:[0,&quot;Telescope macro extension&quot;],&quot;caption&quot;:[0,&quot;Telescope macro extension&quot;]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;ZoomImage&quot;,&quot;value&quot;:true}" await-children=""> <button aria-label="Open full-size image"><figure class="my-8 bg-surface rounded-md py-1"><astro-slot> <img src="/_astro/macros.qRd2izsX_Z28BACG.webp" srcset="/_astro/macros.qRd2izsX_Z1WWcMQ.webp 240w, /_astro/macros.qRd2izsX_1bkSCa.webp 540w, /_astro/macros.qRd2izsX_Z1QMqM7.webp 720w, /_astro/macros.qRd2izsX_Z28BACG.webp 3490w" sizes="(max-width: 360px) 240px, (max-width: 720px) 540px, (max-width: 1600px) 720px, 3490px" alt="Telescope macro extension" width="3490" height="2254" loading="lazy" decoding="async"> </astro-slot> <article class="prose text-center max-w-content mb-2 prose-gray text-base italic"><figcaption>Telescope macro extension</figcaption></article></figure></button> <dialog class="p-3 animate-dialog-in animate-dialog-out svelte-fu0dbb  bg-gray-50"><button class="absolute top-0 right-0 p-2 border border-radius-md bg-gray-100 border-color-gray-300 border-1 w-8 h-8 text-gray-400 hover:text-red-400 text-base font-bold leading-5" aria-label="Close" data-svelte-h="svelte-5ya9si">X</button> <figure class="bg-surface rounded-md py-1"><img src="/_astro/macros.qRd2izsX.png" alt="Telescope macro extension" class="svelte-fu0dbb"> <article class="prose text-center max-w-content mb-2 prose-gray"><figcaption>Telescope macro extension</figcaption></article></figure> </dialog><!--astro:end--></astro-island> </div> <video controls="" autoplay="" loop="true"><source src="/_astro/macro.WjM4jdek.webm" type="video/webm"/></video>
<p>In Neovim, which is better, <strong>macros</strong> or <strong>normal</strong> mode? You may be surprised
at the power of normal mode, and the <strong>execute</strong> command, compared to
managing macros with plugins.</p>
<p>One question you might ask is, if normal mode can perform the same job as macros, then in which cases would you use
macros? Probably when you use them regularly and in different projects. However, you can do this with <code>execute &quot;norm&quot;</code> commands too, by saving them as keybindings.</p>
<h2 id="why-normal-mode">Why normal mode</h2>
<p>When using normal mode, You get to practice writing normal commands live, while looking at the code, rather than
try to decipher a dense string of characters that doesn‚Äôt make sense in an
editable list format, without the original context. I would say it‚Äôs better to get good at vim motions and be
prepared to write them at-will rather than spend time writing and organizing
macros. Yes, there are macro plugins that help you organize them, but I found
that editing and remembering which macro was which, was quite cumbersome.</p>
<p>You should note that regardless of how you are recording your commands, is that it‚Äôs better to use <kbd>fFtT</kbd> and <kbd>hjkl</kbd> than <kbd>wb</kbd>, since targeting the beginning
of a word is way more recognizable in command form than contextual word navigation. For example, no on wants to see a macro with <code>hhhhhjjkkkjdw</code>.</p>
<h2 id="global-commands">Global commands</h2>
<p>One cool trick is to use a <code>g</code> <em>(global)</em> command to make a change to every location of a word in a file.
For example, what if we wanted to use a normal command to ugprade the syntax of an older javascrirpt file?
We would execute the following command:</p>
<pre class="shiki shaku material-theme-darker" style="color:#EEFFFF;background-color:#212121"><div class="code-container"><code><div class="line"><span style="color:undefined">:g :g/function /execute &quot;norm cwconst^[f(i = f{i=&gt; &quot;</span></div></code></div></pre>
<p>Executing <code>:g /function /execute &quot;norm cwconst^[f(i = ^[f{i=&gt; ^[&quot;</code> will change the function syntax to arrow function syntax for all instances of the word <code>function</code>.
Note that the <code>^]</code> symbols are special - they were inserted via <kbd>Ctrl-V</kbd> and then <kbd>Esc</kbd>. Note they are purple in the command box. If <code>^] is not colored differently</code>, than it will not work as the special escape syntax.</p>
<video controls="" autoplay="" loop="true"><source src="/_astro/macro2.RLtRpTk4.webm" type="video/webm"/></video>
<p>Another trick is the <code>:g/found/v/notfound/{cmd}</code> syntax ‚Äî in this
example, a command is being run on lines that contain <code>function</code>, but <em>do not</em>
contain <code>test</code>. This a potentially way to delete all your code but keep your
test! Seriously, don‚Äôt try this at home.</p>
<video controls="" autoplay="" loop="true"><source src="/_astro/global1.PgAoqguO.webm" type="video/webm"/></video>
<p>\</p>
<p>I also found that recording macros often requires multiple tries, which distracts you from whatever you‚Äôre working on.
You won‚Äôt be able to immediately use the macro, since you will have to go back and edit it.
It‚Äôs better to just write the normal mode command and use it immediately.
Then type¬†<code>let @q=&#39;&lt;C-R&gt;q&#39;</code>¬†and then edit the macro inside the quotes. I think it‚Äôs better than polluting your buffers.</p>
<p>Additionally, I had made several enjoyable macros, but forgot what they do and well, deciphering letters
takes more time than to just not use the macro.</p>
<h2 id="another-example">Another example</h2>
<p>In my [Wezterm] config, I wanted to see if I could replace
all instead of <code>a.[Wezterm method]</code> with <code>act.[Wezterm method]</code>, where a Wezterm
method is a command available in the wezterm action API, like
<code>wezterm.action.SendKey</code> or <code>wezterm.action.SplitHorizontal</code>. I could have used
find and replace with a regex string, like <code>%s/act.[A-Z+]/a.[A-Z+]/g</code>, but to
help solve the normal mode debate, I tried doing this with a normal mode
command.</p>
<ol>
<li>
<p>First, I set the ‚Äúfind‚Äù register (<code>@\</code>) to my search string:</p>
<pre class="shiki shaku material-theme-darker" style="color:#EEFFFF;background-color:#212121"><div class="code-container"><code><div class="line"><span style="color:undefined"> \ a.[A-Z*]</span></div></code></div></pre>
</li>
<li>
<p>Then I ran this command:</p>
<pre class="shiki shaku material-theme-darker" style="color:#EEFFFF;background-color:#212121"><div class="code-container"><code><div class="line"><span style="color:undefined">:171,$norm nlact^[&quot;</span></div></code></div></pre>
</li>
<li>
<p>Result: <code>a.AdjustPanelSize</code> and <code>a.ActivePaneDirection</code> have been
updated to have a prefix of <code>act.</code> instead of <code>a.</code>, as well as any other
methods that started with <code>act.</code>. Now, the variable <code>a</code> can be deleted.</p>
</li>
</ol>
<p>However, it is not easy to deal with the escape characters, and the command is
not very readable. A better solution is to use the <code>execute</code> command:</p>
<pre class="shiki shaku material-theme-darker" style="color:#EEFFFF;background-color:#212121"><div class="code-container"><code><div class="line"><span style="color:undefined">execute &quot;159,165norm 0fc2dw&quot;</span></div></code></div></pre>
<p>This command means, if the cursor was directly below the <code>*</code> character below, running <code>:execute &quot;2,4norm fc2dw&quot;</code> would move the cursor to the <code>c</code> in <code>config</code> on line 2, and delete the word
<code>config</code> on lines 2, 3, and 4.</p>
<p>In other words, it would change this:</p>
<pre class="shiki shaku material-theme-darker" style="color:#EEFFFF;background-color:#212121"><div class="code-container"><code><div class="line"><span style="color:#EEFFFF">  </span><span style="color:#89DDFF">*</span><span style="color:#EEFFFF"> config.</span><span style="color:#FFCB6B">a</span><span style="color:#EEFFFF"> </span><span style="color:#89DDFF">=</span><span style="color:#EEFFFF"> </span><span style="color:#F78C6C">1</span><span style="color:#EEFFFF">,</span></div><div class="shaku-callout" style="left:3ch"><span class="shaku-callout-arrow" style="left:0ch"></span><p>cursor should be here</p></div><div class="line"><span style="color:#EEFFFF">    config.</span><span style="color:#FFCB6B">b</span><span style="color:#EEFFFF"> </span><span style="color:#89DDFF">=</span><span style="color:#EEFFFF"> </span><span style="color:#F78C6C">2</span><span style="color:#EEFFFF">,</span></div><div class="line"><span style="color:#EEFFFF">    config.</span><span style="color:#FFCB6B">c</span><span style="color:#EEFFFF"> </span><span style="color:#89DDFF">=</span><span style="color:#EEFFFF"> </span><span style="color:#F78C6C">3</span></div></code></div></pre>
<p><em>into this:</em></p>
<pre class="shiki shaku material-theme-darker" style="color:#EEFFFF;background-color:#212121"><div class="code-container"><code><div class="line"><span style="color:#EEFFFF">{a </span><span style="color:#89DDFF">=</span><span style="color:#EEFFFF"> </span><span style="color:#F78C6C">1</span><span style="color:#EEFFFF">,b </span><span style="color:#89DDFF">=</span><span style="color:#EEFFFF"> </span><span style="color:#F78C6C">2</span><span style="color:#EEFFFF">,c </span><span style="color:#89DDFF">=</span><span style="color:#EEFFFF"> </span><span style="color:#F78C6C">3</span><span style="color:#EEFFFF">}</span></div></code></div></pre>
<p><br/>
In Neovim, macros are stored as their actual commands, and in order to add a
description to them, a plugin is needed. This turned out to be more tricky than
I had expected, as this is a case when the most popular plugins on Github are
actually not to be recommended. The first result, <a href="https://github.com/ecthelionvi/NeoComposer.nvim">NeoComposer</a>,
made little sense to use unless you always kept your macro list to at most 7 macros and you are able to easily decipher all of them.
(macros are displayed as virtual text and you can ‚Äúscroll‚Äù through the macros
via <kbd>C-n</kbd> and <kbd>C-p</kbd>.</p>
<video controls="" autoplay="" loop="true"><source src="/_astro/macro.WjM4jdek.webm" type="video/webm"/></video>
<p>I considered forking the project but I knew my macro collection would be big
enough to require searching. The next most popular plugin was <a href="https://github.com/svermeulen/vim-macrobatics">Macrobatics</a>,
which looked to be exactly what I wanted, but I had this need for everything to be
using the Neovim Lua API, and not direct vim commands, and actually the plugin
just did not work on my machine, so I searched Github until i found one that
actually worked well ‚Äî <a href="https://github.com">telescope-macros</a>. Adding a
telescope finder is a clever and simple solution and I applaud the author<br/>
an editable list is the only thing needed to manage a macro library.</p>
<p>If I have a macro assigned to the <code>@l</code> register, using <code>telescope-macros</code>, I
can apply it repeatedly via <kbd>leader-&gt;ml</kbd>: <kbd>leader-&gt;m</kbd> opens the telescope
macros list, <code>l</code> finds the macro under the <code>@l</code> register, and <code>&lt;cr&gt;</code> closes the
window and applies the macro.</p>
<p>I felt some modifications were essential to make ‚Äî for instance, adding a key
binding to [[‚òÜ Telescope keymap]] that would close the modal and navigate to
the previewed file. Why isn‚Äôt that part of telescope by default? I searched for
examples and found none other than [[ThePrimeagen]]‚Äòs telescope
modifications, and I took his <code>get_preview</code> function, which would open the
buffer from the preview window in the editor.</p>
<p>However, his function didn‚Äôt work and I punted on the idea after trying and
failing to get AI to help. Later on, I actually found Google Duet to be the most
proficient as writing Neovim functions.</p>  <a data-back-to-top data-astro-cid-bvzihdzo class="[&#38;_svg]:fill-theme-amethyst-100; align-middle text-sm text-amethyst-800 no-underline underline-offset-4 hover:text-amethyst-900 hover:no-underline [&#38;:hover_svg]:bg-amethyst-200 [&#38;:hover_svg]:stroke-amethyst-500 [&#38;:hover_svg]:text-amethyst-500 [&#38;_hover_span]:underline [&#38;_span]:underline [&#38;_svg]:bg-amethyst-100"> <span class="underline underline-offset-4">Back to top</span> <svg width="1em" height="1em" viewBox="0 0 24 24" class="inline-block" data-icon="tabler/chevron-up">  <symbol id="ai:local:tabler/chevron-up"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"><path stroke="none" d="M0 0h24v24H0z"/><path d="m6 15 6-6 6 6"/></g></symbol> <use  xlink:href="#ai:local:tabler/chevron-up"></use> </svg> </a> </div> </div> </div> </div>  </article>  </div> </main> <footer data-astro-cid-sz7xmlte> <div class="max-w-3xl" data-astro-cid-sz7xmlte>
&copy; 2024 Aaron Lifton. All rights reserved.
<div class="social-links" data-astro-cid-sz7xmlte> <a href="https://linkedin.com/aaronlifton" target="_blank" data-astro-cid-sz7xmlte> <span class="sr-only" data-astro-cid-sz7xmlte>Are you a recruiter? Connect with Aaron on LinkedIn</span> <svg width="32" height="32" viewBox="0 0 24 24" data-astro-cid-sz7xmlte data-icon="linkedin">   <use  xlink:href="#ai:local:linkedin"></use> </svg> </a> <a href="https://github.com/aaronlifton" target="_blank" data-astro-cid-sz7xmlte> <span class="sr-only" data-astro-cid-sz7xmlte>Go to Aaron's Github page</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" astro-icon="social/github" data-astro-cid-sz7xmlte><path fill="currentColor" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z" data-astro-cid-sz7xmlte></path></svg> </a> </div> </div> </footer>  </body></html>  